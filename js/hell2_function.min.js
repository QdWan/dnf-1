function loadContents(a){var k=imageList;var b=[];var g;var p=bgmList;var h=sfxList;var n=k.length+Object.keys(p).length+Object.keys(h).length;var c=n;var m="0%";function d(e){m=Math.round((((n-c+1)/n)*100),0).toString()+"%";$("#loading_notice").innerHTML=""+e+" 로딩 중 ("+m+" 완료)";$("#loading_progress_bar").style.width=m;--c;if(c<=0){a()}}for(var f=0;f<k.length;f++){g=new Image();g.onload=function(){d("이미지")};g.onerror=function(){d("이미지")};g.src=k[f];$("#imagePreloader").innerHTML+="<img src='"+k[f]+"' />";b.push(g)}if(Object.keys(p).length>0){for(var o in p){if(p.hasOwnProperty(o)){try{d("배경음")}catch(l){d("배경음")}}}}if(Object.keys(h).length>0){for(var o in h){if(h.hasOwnProperty(o)){try{d("효과음")}catch(l){d("효과음")}}}}}function soulCount(b){for(var a=0;a<soulCostList.length;a++){if(soulCostList[a][0]===b){return soulCostList[a][1]}}}function disCount(b,c){switch(b){case"초대장":for(var a=0;a<cutList[2].length;a++){if(cutList[2][a][0]===c){return cutList[2][a][1]}}break;case"코스모소울":for(var a=0;a<cutList[3].length;a++){if(cutList[3][a][0]===c){return cutList[3][a][1]}}break}}function clearCharacterClass(){var b=Object.keys(characterList);for(var a=0;a<b.length;a++){$("#character_sprite").classList.remove(b[a])}}function setRandomCharacter(){clearCharacterClass();var b=deepCopy(Object.keys(characterList));for(var a=0;a<b.length;a++){if(b[a]==="beckey"){b.splice(a,1);break}}var c=b[Math.floor(Math.random()*b.length)];$("#character_sprite").classList.add(c)}function setCharacter(b){$("#character_sprite").classList.add(b);$("#character_type").disabled="disabled";if(b==="beckey"){clearSelect($("#character_type"));var a=document.createElement("option");a.innerHTML="베키";a.value="beckey";$("#character_type").add(a)}else{$("#character_type").selectedIndex=indexSelectByValue($("#character_type"),myCharacter)}}function opt_name_normal(c){if(c==="on"){$("#option_name_normal").checked=optionList.name_normal}var b=$("#style_name_normal");try{if($("#option_name_normal").checked){b.innerHTML=".description.normal {	display:inline-block;}";for(var a=0;a<maxQuantity;a++){$("#description"+a.toString()).style.msTransform="translate("+(-$("#item_name"+a.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+a.toString()).style.webkitTransform="translate("+(-$("#item_name"+a.toString()).offsetWidth/2).toString()+"px,0px) rotateY(0deg)";$("#description"+a.toString()).style.transform="translate("+(-$("#item_name"+a.toString()).offsetWidth/2).toString()+"px,0px) rotateY(0deg)"}}else{b.innerHTML=""}}catch(d){alert('＊경고 : "아이템 명칭" 필터링을 사용할 수 없습니다.\n(브라우저가 특정 기능을 지원하지 않습니다.)');$("#option_name_normal").checked=true}}function opt_name_jogak(c){if(c==="on"){$("#option_name_jogak").checked=dataObj.optionList["name_jogak"]}var b=$("#style_name_jogak");try{if($("#option_name_jogak").checked){b.innerHTML=".description.jogak {	display:inline-block;}";for(var a=0;a<maxQuantity;a++){$("#description"+a.toString()).style.msTransform="translate("+(-$("#item_name"+a.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+a.toString()).style.webkitTransform="translate("+(-$("#item_name"+a.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+a.toString()).style.transform="translate("+(-$("#item_name"+a.toString()).offsetWidth/2).toString()+"px,0px)"}}else{b.innerHTML=""}}catch(d){alert('＊경고 : "에픽 조각 명칭" 필터링을 사용할 수 없습니다.\n(브라우저가 특정 기능을 지원하지 않습니다.)');$("#option_name_jogak").checked=false}}function opt_character(a){if(a==="on"){$("#option_character").checked=optionList.character}if($("#option_character").checked){$("#character_sprite").style.display="block"}else{$("#character_sprite").style.display="none"}}function opt_bgm_type(a){if(a==="on"){$("#option_bgm").checked=optionList.bgm;$("#bgm_type").selectedIndex=indexSelectByValue($("#bgm_type"),optionList.bgm_type)}playBGM($("#bgm_type").value)}function generateInventory(){var h=[];for(var a=0;a<itemList.length;a++){if(itemList[a]["name"]!==""){var k=$("#inventory_table").insertRow(-1);k.id="inventory_row_"+a.toString();k.className="equip";k.className+=" not_show";k.className+=" "+itemList[a]["sort1"];k.className+=" "+itemList[a]["sort2"];k.className+=" "+itemList[a]["sort3"];k.className+=" lv"+itemList[a]["level"].toString();var g=k.insertCell(0);g.innerHTML=itemList[a]["name"];g.className="col_1";var f=k.insertCell(1);if(itemList[a]["sort1"]==="방어구"){f.innerHTML=itemList[a]["sort2"]}else{f.innerHTML=itemList[a]["sort3"]}f.className="col_2";var e=k.insertCell(2);e.innerHTML=itemList[a]["level"].toString();e.className="col_3";var c=k.insertCell(3);c.innerHTML="없음";c.className="col_4";var d=k.insertCell(4);d.innerHTML=itemList[a]["have"].toString();d.className="col_5";var b=k.insertCell(5);b.innerHTML="";b.className="col_6"}}}function generateSet(){var h=[];num=0;for(var a=0;a<itemList.length;a++){if(itemList[a]["name"]!==""){if(itemList[a]["set"]!==""){if(h.indexOf(itemList[a]["set"])===-1){h.push(itemList[a]["set"]);var k=$("#set_table").insertRow(-1);k.id="set_row_"+num.toString();k.className="equip";k.className+=" hap";k.className+=" not_show";temp=0;for(j=0;j<itemList.length;j++){if(itemList[j]["set"]===itemList[a]["set"]){if(!k.classList.contains(itemList[j]["sort1"])){k.classList.add(itemList[j]["sort1"])}if(!k.classList.contains(itemList[j]["sort2"])){k.classList.add(itemList[j]["sort2"])}if(!k.classList.contains(itemList[j]["sort3"])){k.classList.add(itemList[j]["sort3"])}temp+=1}}k.className+=" lv"+itemList[a]["level"].toString();var g=k.insertCell(0);g.innerHTML=itemList[a]["set"];g.className="col_1";var f=k.insertCell(1);f.innerHTML=itemList[a]["sort2"];f.className="col_2";var e=k.insertCell(2);e.innerHTML=itemList[a]["level"].toString();e.className="col_3";var d=k.insertCell(3);d.innerHTML="";d.className="col_4";var c=k.insertCell(4);c.innerHTML="0/"+temp.toString();c.className="col_5";var b=k.insertCell(5);b.innerHTML="";b.className="col_6";num+=1}var k=$("#set_table").insertRow(-1);k.id="set_row_"+num.toString();k.className="equip";k.className+=" not_show";k.className+=" "+itemList[a]["sort1"];k.className+=" "+itemList[a]["sort2"];k.className+=" "+itemList[a]["sort3"];k.className+=" lv"+itemList[a]["level"].toString();var g=k.insertCell(0);g.innerHTML="┗ "+itemList[a]["name"];g.className="col_1";var f=k.insertCell(1);if(itemList[a]["sort1"]==="방어구"){f.innerHTML=itemList[a]["sort2"]}else{f.innerHTML=itemList[a]["sort3"]}f.className="col_2";var e=k.insertCell(2);e.innerHTML=itemList[a]["level"].toString();e.className="col_3";var c=k.insertCell(3);c.innerHTML="없음";c.className="col_4";var d=k.insertCell(4);d.innerHTML=itemList[a]["have"].toString();d.className="col_5";var b=k.insertCell(5);b.innerHTML="";b.className="col_6";num+=1}}}}function generateCraft(){var k=[];for(var a=0;a<itemList.length;a++){if(itemList[a]["name"]!==""&itemList[a]["goyu"]===""){var l=$("#craft_table").insertRow(-1);l.id="craft_row_"+a.toString();l.className="equip";l.className+=" not_show";l.className+=" "+itemList[a]["sort1"];l.className+=" "+itemList[a]["sort2"];l.className+=" "+itemList[a]["sort3"];l.className+=" lv"+itemList[a]["level"].toString();var h=l.insertCell(0);h.innerHTML=itemList[a]["name"];h.className="col_1";var g=l.insertCell(1);if(itemList[a]["sort1"]==="방어구"){g.innerHTML=itemList[a]["sort2"]}else{g.innerHTML=itemList[a]["sort3"]}g.className="col_2";var f=l.insertCell(2);f.innerHTML=itemList[a]["level"].toString();f.className="col_3";var e=l.insertCell(3);e.innerHTML="0";e.className="col_4";var d=l.insertCell(4);d.innerHTML="0";d.className="col_5";var c=l.insertCell(5);c.innerHTML="불가";c.className="col_6";var b=l.insertCell(6);b.innerHTML="<input id='gabriel_checkbox_"+[a]+"' class='gabriel_checkbox' type='checkbox' />";b.className="col_7"}}$("#craft_check_max").innerHTML=thousand(maxJogak);generateGabriel()}function generateGabriel(){var b=$$(".gabriel_checkbox");for(var a=0;a<b.length;a++){(function(c){b[c].onclick=function(){if(b[c].checked===true){if(gabrielSetting.get!==null){for(var d=0;d<itemList.length;d++){if(itemList[d]["name"]===gabrielSetting.get["name"]){$("#gabriel_checkbox_"+d.toString()).checked=false;break}}}var e=parseInt(b[c].id.split("_")[2]);gabrielSetting.get=itemList[e];b[c].checked=true}else{gabrielSetting.get=null}setGabriel("settingOnly")}})(a)}}function setDate(){var a=dateSettingList;switch(dateState.changed){case 2:a=dateSettingDefault;case 1:dateState.len_wd=Math.ceil(a[0]/a[2])+Math.ceil(a[3]/a[2])+Math.ceil(a[4]/a[2])+Math.ceil(a[5]/a[2])+Math.ceil(a[6]/a[2])+Math.ceil(a[7]/a[2]);dateState.len_we=Math.ceil(a[1]/a[2])+Math.ceil(a[3]/a[2])+Math.ceil(a[4]/a[2])+Math.ceil(a[5]/a[2])+Math.ceil(a[6]/a[2])+Math.ceil(a[7]/a[2]);dateState.date=1;dateState.week=1;dateState.day=dateSettingWeek[0];dateState.dayType=dayTypeList[dateState.day];if(dateCount===0){dateState.remain=dateState["len_"+dateState.dayType];$("#date_fatigue").style.width="100%"}else{dateState.remain=dateCount;if(dateState.remain-dateState["len_"+dateState.dayType]>=0){while(1){dateState.remain-=dateState["len_"+dateState.dayType];dateState.date+=1;dateState.week=Math.max(1,Math.ceil(dateState.date/7));dateState.day=dateSettingWeek[(dateSettingWeek.indexOf(dateState.day)+1)%7];dateState.dayType=dayTypeList[dateState.day];if(dateState.remain-dateState["len_"+dateState.dayType]<0){break}}}dateState.remain=dateState["len_"+dateState.dayType]-dateState.remain;$("#date_fatigue").style.width=((dateState.remain/dateState["len_"+dateState.dayType])*100).toString()+"%"}dateState.changed=0;break;case 0:if(dateState.remain>0){dateState.remain-=1}else{dateState.date+=1;if(dateState.date%100===0){tower+=1;if($("#pot_tradable").value==="notTradable"){$("#pot_open").value="개봉 ("+tower.toString()+")";$("#pot_open").disabled=""}}dateState.day=dateSettingWeek[(dateSettingWeek.indexOf(dateState.day)+1)%7];dateState.dayType=dayTypeList[dateState.day];dateState.remain=dateState["len_"+dateState.dayType]-1}dateState.week=Math.max(1,Math.ceil(dateState.date/7));break}$("#date_count").innerHTML=thousand(dateState.date);$("#date_summary_num").innerHTML=thousand(dateState.week)+"주차 "+dateState.day+"요일";$("#date_fatigue").style.width=((dateState.remain/dateState["len_"+dateState.dayType])*100).toString()+"%"}function dungeon_loading(a){saveData()}function dungeon_select(c){if(c){$("#dungeon").selectedIndex=indexSelectByValue($("#dungeon"),c.toString())}if(playMode!=="normal"){$("#difficulty").selectedIndex=4}if($("#dungeon").value===""){input.dungeon=0}else{input.dungeon=parseInt($("#dungeon").value)}$("#frame_top").style.background="url('./images/epic/background/background_"+input.dungeon.toString()+".jpg')";for(var b=0;b<maxQuantity;b++){$("#item"+b.toString()).style.left=startList[input.dungeon][0].toString()+"px";$("#item"+b.toString()).style.top=startList[input.dungeon][1].toString()+"px";$("#item_name"+b.toString()).className="item_name";$("#item_name"+b.toString()).style.visibility="hidden";$("#description"+b.toString()).style.msTransform="translate(0px,0px)";$("#description"+b.toString()).style.webkitTransform="translate(0px,0px) rotateY(0deg)";$("#description"+b.toString()).style.transform="translate(0px,0px) rotateY(0deg)";$("#item_img"+b.toString()).style.visibility="hidden";$("#effect_appear"+b.toString()).style.visibility="hidden";$("#effect_land"+b.toString()).style.visibility="hidden";$("#effect_wait"+b.toString()).style.visibility="hidden";clearTimeout(autoLooting[b-1]);clearTimeout(autoEffect.appear[b-1]);clearTimeout(autoEffect.land[b-1]);clearTimeout(autoEffect.wait[b-1]);$("#item_img"+b.toString()).className="item_img"}zoneList=[];for(var b=jogakRange[input.dungeon][0][0];b<=jogakRange[input.dungeon][0][1];b++){for(var a=jogakRange[input.dungeon][1][0];a<=jogakRange[input.dungeon][1][1];a++){zoneList.push([b,a])}}for(var b=0;b<coopList[input.dungeon].length;b++){zoneList.push(coopList[input.dungeon][b])}$("#person_helper").innerHTML=helpList[input.dungeon];if(startList[input.dungeon][0]<300){$("#character_sprite").style.left=(startList[input.dungeon][0]-120)+"px";$("#character_sprite").classList.remove("left");$("#character_sprite").classList.add("right")}else{$("#character_sprite").style.left=(startList[input.dungeon][0]-385)+"px";$("#character_sprite").classList.remove("right");$("#character_sprite").classList.add("left")}$("#character_sprite").style.top=(startList[input.dungeon][1]-177)+"px";$("#character_sprite").classList.add("wait");if(playMode!=="normal"){var d="";$("#hellgate_level").style.left=(startList[input.dungeon][0]-125)+"px";$("#hellgate_level").style.top=(startList[input.dungeon][1]-70)+"px";if(input.dungeon===6){$("#hellgate_level").style.top=(startList[input.dungeon][1]-40)+"px"}d="[Lv.";for(var b=0;b<levelList[playMode][input.dungeon].length;b++){d+=levelList[playMode][input.dungeon][b];if(b+1<levelList[playMode][input.dungeon].length){d+=", "}}d+="]";$("#hellgate_level").innerHTML=d;$("#hellgate_item").style.left=(startList[input.dungeon][0]-125)+"px";$("#hellgate_item").style.top=(startList[input.dungeon][1]-55)+"px";if(input.dungeon===6){$("#hellgate_item").style.top=(startList[input.dungeon][1]-25)+"px"}d="[";for(var b=0;b<dropPartList[playMode][input.dungeon].length;b++){if(dropPartList[playMode][input.dungeon][b]!==""){d+=dropPartList[playMode][input.dungeon][b];if(b+1<dropPartList[playMode][input.dungeon].length){d+=", "}}}if(d[d.length-2]===","){d=d.slice(0,d.length-2)}d+="]";$("#hellgate_item").innerHTML=d;$("#hellgate_life").style.left=(startList[input.dungeon][0]-125)+"px";$("#hellgate_life").style.top=(startList[input.dungeon][1]-40)+"px";if(input.dungeon===6){$("#hellgate_life").style.top=(startList[input.dungeon][1]-10)+"px"}hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(lifeList[input.dungeon])}else{hellgate=1}if($("#option_bgm").checked===true){playBGM($("#bgm_type").value)}}function setObjective(b){objective=[];objective.push($("#objective_list").value);switch(objective[0]){case"none":break;case"item":objective.push($("#objective_item_first").value);objective.push($("#objective_item_second").value);objective.push($("#objective_item_third").value);objective.push($("#objective_item_name").value);break;case"set":if(b==="run"){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var a=0;a<temp2;a++){if($("#set_row_"+a.toString()).getElementsByTagName("td")[0].innerHTML.indexOf($("#objective_set_name").value)!==-1){tr_set=$("#set_row_"+a.toString());break}}if(tr_set.getElementsByTagName("td")[5].innerHTML!==""){alert('＊경고 : 해당 세트는 이미 완성되었습니다.\n대상 : "'+$("#objective_set_name").value+'"');return false}}objective.push($("#objective_set_first").value);objective.push($("#objective_set_name").value);break;case"count":if(b==="run"){if($("#objective_count_text").value===""){alert("＊경고 : 실행 횟수를 입력하세요.");return false}else{if(!isNumber($("#objective_count_text").value)){alert("＊경고 : 실행 횟수는 숫자를 입력해야 합니다.");return false}else{if(parseInt($("#objective_count_text").value)<=0){alert("＊경고 : 실행 횟수는 0보다 커야 합니다.");return false}}}}objective.push(parseInt($("#objective_count_text").value));objective.push(count);break;case"cost":if(b==="run"){if($("#objective_cost_text").value===""){alert("＊경고 : 초대장 개수를 입력하세요.");return false}else{if(!isNumber($("#objective_cost_text").value)){alert("＊경고 : 초대장 개수는 숫자를 입력해야 합니다.");return false}else{if(parseInt($("#objective_cost_text").value)<=0){alert("＊경고 : 초대장 개수는 0보다 커야 합니다.");return false}else{if(parseInt($("#objective_cost_text").value)<costList[input.dungeon]){alert("＊경고 : 초대장 개수가 입장 조건("+costList[input.dungeon]+"장)보다 부족합니다.");return false}}}}}objective.push(parseInt($("#objective_cost_text").value));objective.push(count);break;case"fatigue":if(b==="run"){if($("#objective_fatigue_max").value===""){alert("＊경고 : 전체 피로도를 입력하세요.");return false}else{if($("#objective_fatigue_per").value===""){alert("＊경고 : 1회동 소모 피로도를 입력하세요.");return false}else{if(!isNumber($("#objective_fatigue_max").value)){alert("＊경고 : 전체 피로도는 숫자를 입력해야 합니다.");return false}else{if(!isNumber($("#objective_fatigue_per").value)){alert("＊경고 : 1회당 소모 피로도는 숫자를 입력해야 합니다.");return false}else{if(parseInt($("#objective_fatigue_max").value)<=0){alert("＊경고 : 전체 피로도는 0보다 커야 합니다.");return false}else{if(parseInt($("#objective_fatigue_per").value)<=0){alert("＊경고 : 1회동 소모 피로도는 0보다 커야 합니다.");return false}}}}}}}objective.push(parseInt($("#objective_fatigue_max").value));objective.push(parseInt($("#objective_fatigue_per").value));objective.push(count);break}if(b==="run"){return true}}function checkObjective(e){var g=[];if(e==="setting"){setObjective()}switch(objective[0]){case"item":if(objective[4]!==""){for(var c=0;c<itemList.length;c++){if(objective[4]===itemList[c]["name"]){g.push(itemList[c]);break}}$("#objective_state_item_name").innerHTML=g[0]["sort3"];$("#objective_state_item_quantity").innerHTML=g[0]["have"];$("#objective_state_item_jogak").innerHTML=g[0]["jogak"];if(g[0]["have"]===0&&g[0]["jogak"]<maxJogak){$("#objective_state_item_complete").classList.remove("true");$("#objective_state_item_complete").classList.add("false")}else{$("#objective_state_item_complete").classList.remove("false");$("#objective_state_item_complete").classList.add("true")}}if(g.length===0){$("#objective_state_item_name").innerHTML="";$("#objective_state_item_quantity").innerHTML="";$("#objective_state_item_jogak").innerHTML="";$("#objective_state_item_complete").classList.remove("true");$("#objective_state_item_complete").classList.remove("false")}break;case"set":if(objective[2]!==""){for(var c=0;c<itemList.length;c++){if(objective[2]===itemList[c]["set"]){g.push(itemList[c])}}for(var c=0;c<g.length;c++){$("#objective_state_set_"+(c+1).toString()+"_name").innerHTML=g[c]["sort3"];$("#objective_state_set_"+(c+1).toString()+"_quantity").innerHTML=g[c]["have"];$("#objective_state_set_"+(c+1).toString()+"_jogak").innerHTML=g[c]["jogak"];if(g[c]["have"]===0&&g[c]["jogak"]<maxJogak){$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("true");$("#objective_state_set_"+(c+1).toString()+"_complete").classList.add("false")}else{$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("false");$("#objective_state_set_"+(c+1).toString()+"_complete").classList.add("true")}}}for(var c=0;c<5;c++){if(c+1>g.length){$("#objective_state_set_"+(c+1).toString()+"_name").innerHTML="";$("#objective_state_set_"+(c+1).toString()+"_quantity").innerHTML="";$("#objective_state_set_"+(c+1).toString()+"_jogak").innerHTML="";$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("true");$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("false")}}break}if(e!=="report"){return}var a=false;var d="";if(objective[0]==="none"){a=false;d=""}else{if(objective[0]==="item"){if(thisEpic.length>0||thisJogak.length>0){var b=[];for(var c=0;c<thisEpic.length;c++){b.push(thisEpic[c])}for(var c=0;c<thisJogak.length;c++){b.push(thisJogak[c])}for(var c=0;c<b.length;c++){if(objective[4]===b[c]["name"]){d=objective[4];a=true}else{if(objective[4]===""&&objective[3]===b[c]["sort3"]){d=b[c]["name"]+" (모든 "+objective[3]+" 아이템)";a=true}else{if(objective[4]===""&&objective[3]===""&&objective[2]===b[c]["sort2"]){d=b[c]["name"]+" (모든 "+objective[2]+" 아이템)";a=true}else{if(objective[4]===""&&objective[3]===""&&objective[2]===""&&objective[1]===b[c]["sort1"]){d=b[c]["name"]+" (모든 "+objective[1]+" 아이템)";a=true}else{if(objective[4]===""&&objective[3]===""&&objective[2]===""&&objective[1]===""){d=b[c]["name"]+" (모든 에픽 아이템 )";a=true}}}}}}}}else{if(objective[0]==="set"){if(objective[1]===""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var c=0;c<temp2;c++){var h=$("#set_row_"+c.toString());if(h.getElementsByTagName("td")[5].innerHTML!==""){var f=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);for(j=0;j<itemList.length;j++){if(itemList[j]["set"]===f&&itemList[j]["firstCount"]>=count){d=f+" (모든 세트)";a=true;break}}}}}else{if(objective[2]===""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var c=0;c<temp2;c++){var h=$("#set_row_"+c.toString());if(h.getElementsByTagName("td")[5].innerHTML!==""){if(h.getElementsByTagName("td")[1].innerHTML===objective[1]){var f=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);for(j=0;j<itemList.length;j++){if(itemList[j]["set"]===f&&itemList[j]["firstCount"]===count){d=f+" (모든 "+objective[1]+" 아이템)";a=true;break}}}}}}else{temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var c=0;c<temp2;c++){if($("#set_row_"+c.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(objective[2])!==-1){h=$("#set_row_"+c.toString());break}}if(h.getElementsByTagName("td")[5].innerHTML!==""){d=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);a=true}}}}else{if(objective[0]==="count"){if(objective[2]+objective[1]<=count){d=objective[1].toString()+"회 실행";a=true}}else{if(objective[0]==="cost"){if(objective[2]+Math.floor(objective[1]/costList[input.dungeon])<=count){d=objective[1].toString()+"장 중 "+(Math.floor(objective[1]/costList[input.dungeon])*costList[input.dungeon]).toString()+"장 사용 				(총 "+Math.floor(objective[1]/costList[input.dungeon]).toString()+"회 실행)";a=true}}else{if(objective[0]==="fatigue"){if(objective[3]+Math.ceil(objective[1]/objective[2])<=count){d=Math.ceil(objective[1]/objective[2]).toString()+"회 실행 (전체 피로도 : "+objective[1].toString()+")";a=true}}}}}}}if(e==="report"){return{out:a,showing:d}}}function getEpicList(){currentList_goyu=[];for(var a=0;a<goyuList.length;a++){if(goyuList[a]["goyu"]===areaList[input.dungeon]){currentList_goyu.push(goyuList[a])}}currentList=[];for(var a=0;a<itemList.length;a++){if(levelList[playMode][input.dungeon].indexOf(itemList[a]["level"])!==-1&&itemList[a]["name"]!==""&&itemList[a]["goyu"]===""){currentList.push(itemList[a])}}}function trigger(a,d,e){switch(d){case 0:count+=1;$("#round_count").innerHTML=thousand(count);cost.invite+=costList[input.dungeon];cost.invite_real+=costList[input.dungeon];$("#cost_invitation").innerHTML=thousand(cost.invite);$("#cost_real").innerHTML=thousand(cost.invite_real);$("#cost_gold").innerHTML=setWon(cost.invite*gold+cost.gold);$("#cost_gold_real").innerHTML=setWon(cost.invite_real*gold+cost.gold_real);if(myCharacter===""){var c=Object.keys(characterList);for(var b=0;b<c.length;b++){if($("#character_sprite").classList.contains(c[b])){e="hit_"+characterList[c[b]]["hittype"];break}}}else{e="hit_"+characterList[myCharacter]["hittype"]}setTimeout(function(){trigger(a,1,e)},playSpeed[playMode]);break;default:playSfx(e);if(playMode==="normal"){hellgate=Math.max(0,hellgate-power)}else{hellgate=Math.max(0,hellgate-Math.max(0,(power-defList[input.dungeon])))}$("#hellgate_life").innerHTML=thousand(hellgate);dateCount+=1;if((dateCount-1)%100===0){saveData()}setDate();if(hellgate>0&&runningState!==""){setTimeout(function(){trigger(a,1,e)},playSpeed[playMode])}else{if(hellgate<=0){if(runningState==="trigger"){runningState="simulate"}simulate(a)}else{if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}saveData()}}break}}function simulate(e){dropCount=0;thisTime=[];for(var c=0;c<maxQuantity;c++){coordinate[c-1]=[0,0];$("#item"+c.toString()).style.msTransform="translate(0px,0px)";$("#item"+c.toString()).style.webkitTransform="translate(0px,0px)";$("#item"+c.toString()).style.transform="translate(0px,0px)";$("#description"+c.toString()).className="description";$("#item_name"+c.toString()).className="item_name";$("#item_name"+c.toString()).style.visibility="hidden";$("#description"+c.toString()).style.msTransform="translate(0px,0px)";$("#description"+c.toString()).style.webkitTransform="translate(0px,0px) rotateY(0deg)";$("#description"+c.toString()).style.transform="translate(0px,0px) rotateY(0deg)";$("#item_img"+c.toString()).style.visibility="hidden";$("#effect_appear"+c.toString()).style.visibility="hidden";$("#effect_land"+c.toString()).style.visibility="hidden";$("#effect_wait"+c.toString()).style.visibility="hidden";if(e!==3){clearTimeout(autoLooting[c-1]);clearTimeout(autoEffect.appear[c-1]);clearTimeout(autoEffect.land[c-1]);clearTimeout(autoEffect.wait[c-1]);$("#item_img"+c.toString()).className="item_img"}}input.dun_diff=$("#difficulty").value;input.hell_diff=rand(chanceList_num[0]);$("#round_difficulty").innerHTML=chanceList_name[0][input.hell_diff];var h=[];for(var c=0;c<zoneList.length;c++){h[c]=zoneList[c]}var f=(jogakRange[input.dungeon][0][1]-jogakRange[input.dungeon][0][0]+1)*(jogakRange[input.dungeon][1][1]-jogakRange[input.dungeon][1][0]+1);var n=dropQuantityList[1].max();var k=[];for(var c=0;c<f;c++){k[c]=h[c]}var g=[];for(var c=f;c<h.length;c++){g[c-f]=h[c]}k=shuffle(k);g=shuffle(g);h=[];for(var c=0;c<n;c++){h.push(k[c])}for(var c=0;c<g.length;c++){h.push(g[c])}var l=dropQuantityList[1][input.dun_diff];var d=dropQuantityList[0][input.hell_diff];var a=dropQuantityList[2][input.dun_diff][Math.floor(Math.random()*dropQuantityList[2][input.dun_diff].length)];quantity=d+a+l;for(var c=0;c<l;c++){sortItem("조각",c,h)}for(var c=n;c<n+d;c++){sortItem("장비",c,h)}for(var c=n+d;c<n+d+a;c++){getItem("초대장",input.dun_diff,c,h)}thisEpic=[];thisJogak=[];for(var c=0;c<thisTime.length;c++){if(thisTime[c][2]==="에픽"||thisTime[c][2]==="고유에픽"){update("에픽",thisTime[c][3]);thisEpic.push(thisTime[c][3])}else{switch(thisTime[c][2]){case"마봉":break;case"코스모소울":case"지옥구슬":case"초대장":update(thisTime[c][2]);break;case"조각":update(thisTime[c][2],thisTime[c][3]);if(thisTime[c][3]["jogak"]===maxJogak){for(var b=0;b<thisJogak.length;b++){if(thisTime[c][3]["name"]===thisJogak[b]["name"]){continue}}thisJogak.push(thisTime[c][3])}break}}}if(thisEpic.length>0||thisJogak.length>0){playSfx("epic_appear");if(thisEpic.length>0){var m="<span class='equip";for(var c=0;c<thisEpic.length;c++){m+=" "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()}m+="'><span class='run";for(var c=0;c<thisEpic.length;c++){m+=" "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()}m+="'>"+thousand(count.toString())+"회차 								<span class='cost'>(초대장 : "+thousand(cost.invite)+" / 실질 : "+thousand(cost.invite_real)+")</span>								<span class='difficulty_"+input.hell_diff.toString()+"'> &lt;"+chanceList_name[0][input.hell_diff].toString()+"&gt;</span>							</span><br />";for(var c=0;c<thisEpic.length;c++){if(thisEpic[c]["sort1"]==="방어구"){if(thisEpic[c]["set"]!==""){m+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>									<span class='set'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort2"]+" / "+thisEpic[c]["level"]+"제]									 <span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}else{m+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>									<span class='epic'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort2"]+" / "+thisEpic[c]["level"]+"제]									 <span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}}else{if(thisEpic[c]["set"]!==""){m+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>								<span class='set'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort3"]+" / "+thisEpic[c]["level"]+"제] 								 <span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}else{m+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>								<span class='epic'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort3"]+" / "+thisEpic[c]["level"]+"제] 								<span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}}}m+="</span>";if($("#record").style.display==="block"){content_text[0]+=m;$("#record").innerHTML=content_text[0];$("#record").scrollTop=$("#record").scrollHeight}else{content_text[0]+=m}}}checkDrop(e)}function checkDrop(c){var a=false;if($("#option_gabriel").checked===true&&Math.random()<=gabrielSetting.chance){a=true}if(c===1){playSfx("item_drop");for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}if(a===true){onoff("gabriel");setGabriel()}else{onoff("drop");nextStep(1)}}else{if(c===2||c===3){var d=checkObjective("report");var b=d.out;var f=d.showing;if(b===true){var g="<span class='system'>====================&lt;탐색 종료&gt;====================";g+="<br/>※ 종료 조건 : "+$("#objective_list").options[$("#objective_list").selectedIndex].text+" － "+f;g+="<br/>================================================</span>";content_text[0]+=g;$("#record").innerHTML=content_text[0];gabrielSetting.alreadySatisfy=true;if($("#record").style.display==="block"){$("#record").scrollTop=$("#record").scrollHeight}runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}objective=[];playSfx("item_drop");for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}if(a===true){gabrielSetting.alreadySatisfy=true;onoff("gabriel");setGabriel()}else{onoff("drop");nextStep(c)}}else{if(runningState!==""){if(a===true){playSfx("item_drop");for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}gabrielSetting.replay=true;onoff("gabriel");setGabriel()}else{if(playMode!=="normal"&&power<lifeList[input.dungeon]+defList[input.dungeon]){playSfx("item_drop");for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}}nextStep(c)}}else{playSfx("item_drop");for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}if(a===true){onoff("gabriel");setGabriel()}else{onoff("drop");nextStep(c)}}}}}}function nextStep(b,f){if(playMode!=="normal"&&input.dungeon===18){var d=checkObjective("report");var a=d.out;var e=d.showing;if((b===2||b===3)&&a===false&&runningState!==""&&power>=lifeList[input.dungeon]+defList[input.dungeon]){playSfx("item_drop");for(var c=0;c<thisTime.length;c++){dropItem(thisTime[c])}}runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}objective=[];onoff(2.5);saveData();ending(0)}else{if(b===1){saveData();runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}}else{if(b===2||b===3){var d=checkObjective("report");var a=d.out;var e=d.showing;if(a===true){if(gabrielSetting.alreadySatisfy===false){gabrielSetting.alreadySatisfy=true;var g="<span class='system'>====================&lt;탐색 종료&gt;====================";g+="<br/>※ 종료 조건 : "+$("#objective_list").options[$("#objective_list").selectedIndex].text+" － "+e;g+="<br/>================================================</span>";content_text[0]+=g;$("#record").innerHTML=content_text[0];if($("#record").style.display==="block"){$("#record").scrollTop=$("#record").scrollHeight}saveData();runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}objective=[]}onoff(2.5)}else{if(runningState!==""){if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}runningState="trigger";trigger(2,0)}else{saveData();runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode!=="normal"){hellgate=lifeList[input.dungeon];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}}}}}}}function setGabriel(d){if($("#gabriel_type").value==="manual"&&d!="settingOnly"){playSfx("epic_appear")}else{if($("#gabriel_type").value==="auto"&&gabrielSetting.get===null&&d!=="settingOnly"){onoff("gabriel_autoFirst");playSfx("epic_appear")}}if(d!=="settingOnly"){$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");gabrielSetting.trading=true;gabrielSetting.changable=gabrielSetting.maxChangable;$("#gabriel_change").value="재료 변경 ("+gabrielSetting.changable+"/"+gabrielSetting.maxChangable+")"}var g=["type","icon","name","jogak"];for(var f=0;f<g.length;f++){$("#gabriel_item_get_"+g[f]).innerHTML=""}$("#gabriel_item_get_icon").style.backgroundPosition="0px 0px";for(var f=1;f<=5;f++){for(var e=0;e<g.length;e++){$("#gabriel_item_give_"+f.toString()+"_"+g[e]).innerHTML=""}$("#gabriel_item_give_"+f.toString()+"_icon").style.backgroundPosition="0px 0px"}$("#gabriel_message_box").style.visibility="hidden";$("#gabriel_yes").disabled="";if(gabrielSetting.changable<=0){$("#gabriel_change").disabled="disabled"}else{$("#gabriel_change").disabled=""}if(gabrielSetting.get===null){$("#gabriel_message").innerHTML="에픽 조각을 받고 싶은 장비를<br/>에픽 도감에서 선택해주세요.";$("#gabriel_message_box").style.visibility="visible";$("#gabriel_yes").disabled="disabled";$("#gabriel_change").disabled="disabled";if(d!="settingOnly"){doGabriel("notSet")}return}else{$("#gabriel_item_get_type").innerHTML="<p>"+gabrielSetting.get["sort1"]+"</p>";$("#gabriel_item_get_icon").style.backgroundPosition=spritePosition(gabrielSetting.get["icon"],1);$("#gabriel_item_get_name").innerHTML="<p>"+gabrielSetting.get["name"]+"</p>";$("#gabriel_item_get_jogak").innerHTML="<p>"+gabrielSetting.get["jogak"]+" 조각 (+ 5)</p>"}var l=gabrielSetting.get["sort1"];var a=gabrielSetting.get["level"];var b=gabrielSetting.get["name"];var n=gabrielSetting.get["set"];var m=[];var c=[];for(var f=0;f<itemList.length;f++){if(itemList[f]["name"]!=b&&itemList[f]["sort1"]===l&&itemList[f]["level"]===a&&itemList[f]["jogak"]>=10){if(n!==""&&itemList[f]["set"]===n){m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);m.push(itemList[f]);c.push(itemList[f])}else{m.push(itemList[f]);c.push(itemList[f])}}}var k=[];for(var f=0;f<itemList.length;f++){if(itemList[f]["name"]!=b&&itemList[f]["sort1"]!=l&&itemList[f]["level"]===a&&itemList[f]["jogak"]>=10&&m.indexOf(itemList[f])<0){k.push(itemList[f])}}if(c.length<3||k.length<2){$("#gabriel_message").innerHTML="동일 레벨의 에픽 조각이<br/>부족하여 교환할 수 없습니다.";$("#gabriel_message_box").style.visibility="visible";$("#gabriel_yes").disabled="disabled";$("#gabriel_change").disabled="disabled";if(d!="settingOnly"){doGabriel("no")}return}else{m=shuffle(m);k=shuffle(k);var h=[];for(var f=0;f<m.length;f++){if(h.indexOf(m[f])<0){h.push(m[f])}if(h.length===3){break}}h.push(k[0]);h.push(k[1]);h=shuffle(h);gabrielSetting.give=h;for(var f=0;f<5;f++){$("#gabriel_item_give_"+(f+1).toString()+"_type").innerHTML="<p>"+gabrielSetting.give[f]["sort1"]+"</p>";$("#gabriel_item_give_"+(f+1).toString()+"_icon").style.backgroundPosition=spritePosition(gabrielSetting.give[f]["icon"],1);$("#gabriel_item_give_"+(f+1).toString()+"_name").innerHTML="<p>"+gabrielSetting.give[f]["name"]+"</p>";$("#gabriel_item_give_"+(f+1).toString()+"_jogak").innerHTML="<p>"+gabrielSetting.give[f]["jogak"]+" 조각 (-10)</p>"}if(d!="settingOnly"){doGabriel("yes")}}}function doGabriel(a){function c(){playSfx("hell_gabriel_no");if(gabrielSetting.replay===true){$("#character_sprite").classList.remove("wait");$("#character_sprite").classList.add("attack");gabrielSetting.replay=false;gabrielSetting.trading=false;onoff(2);nextStep(3)}else{gabrielSetting.trading=false;onoff(0)}}function b(){playSfx("hell_gabriel_yes");for(var d=0;d<gabrielSetting.give.length;d++){update("조각",gabrielSetting.give[d],-10)}update("조각",gabrielSetting.get,5);if(gabrielSetting.get["jogak"]-5<maxJogak&&gabrielSetting.get["jogak"]>=maxJogak){thisJogak.push(gabrielSetting.get)}if(gabrielSetting.replay===true){$("#character_sprite").classList.remove("wait");$("#character_sprite").classList.add("attack");gabrielSetting.replay=false;gabrielSetting.trading=false;onoff(2);nextStep(3)}else{gabrielSetting.trading=false;onoff(0)}}$("#gabriel_change").onclick=function(){gabrielSetting.changable-=1;$("#gabriel_change").value="재료 변경 ("+gabrielSetting.changable.toString()+"/"+gabrielSetting.maxChangable+")";setGabriel("settingOnly")};$("#gabriel_no").onclick=function(){c()};$("#gabriel_yes").onclick=function(){b()};if($("#gabriel_type").value==="auto"&&a!="notSet"){switch(a){case"no":c();break;case"yes":b();break}}}function sortItem(k,h,l){switch(k){case"장비":input.rarity=chanceList_name[1][input.hell_diff][input.dun_diff][rand(chanceList_num[1][input.hell_diff][input.dun_diff])];if(input.rarity!=="에픽"){getItem(k,input.rarity,h,l);return}break;case"조각":input.rarity="에픽";break}switch(k){case"장비":var b=deepCopy(chanceList_name[2]);var e=deepCopy(chanceList_num[2]);if(input.dungeon===17){e[1]*=20;e[0]=1-e[1]}input.goyu=b[rand(e)];if(input.goyu==="고유에픽"){if(currentList_goyu.length>0){getItem(k,input.goyu,h,l);return}}break;case"조각":input.goyu="일반에픽";break}var a=deepCopy(dropPartList[playMode][input.dungeon]);var c=deepCopy(chanceList_num[3]);var f=a.length;for(var g=f-1;g>=0;g--){if(a[g]===""){a.splice(g,1);c.splice(g,1)}}input.type=a[rand(c)];switch(playMode){case"normal":currentList_level=[];for(var g=0;g<levelList[playMode][input.dungeon].length;g++){currentList_level.push(0)}for(var g=0;g<currentList.length;g++){for(var d=0;d<levelList[playMode][input.dungeon].length;d++){if((currentList[g]["sort1"]===input.type||currentList[g]["sort2"]===input.type)&&currentList[g]["level"]===levelList[playMode][input.dungeon][d]){currentList_level[d]+=1}}}for(var g=0;g<chanceList_num[4].length;g++){if(chanceList_num[4][g][0].indexOf(input.dungeon)!==-1){for(var d=0;d<currentList_level.length;d++){currentList_level[d]=currentList_level[d]*chanceList_num[4][g][1][d]}break}}input.level=levelList[playMode][input.dungeon][rand(currentList_level)];break;default:input.level=levelList[playMode][input.dungeon];break}getItem(k,input.rarity,h,l);return}function getItem(f,k,e,g){switch(f){case"장비":switch(k){case"마봉":var d=fieldList[Math.floor(Math.random()*fieldList.length)];if(d.split("_")[1]==="방어구"){var c=d.split("_")[2]+" "+d.split("_")[3]}else{var c=d.split("_")[3]}$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" rare";$("#item_name"+e.toString()).innerHTML="마법으로 봉인된 "+c;$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(d,1);$("#item_img"+e.toString()).style.width=spriteSize(d,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(d,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";thisTime.push([e,g,k]);break;case"코스모소울":var d="field_기타";var c="코스모 소울";$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" epic";$("#item_name"+e.toString()).innerHTML=c;$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px) rotateY(0deg)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px) rotateY(0deg)";$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(d,1);$("#item_img"+e.toString()).style.width=spriteSize(d,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(d,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";thisTime.push([e,g,k]);break;case"지옥구슬":var d="field_기타";var c=areaList[input.dungeon]+" 지옥구슬";$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" unique";$("#item_name"+e.toString()).innerHTML=c;$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px) rotateY(0deg)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px) rotateY(0deg)";$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(d,1);$("#item_img"+e.toString()).style.width=spriteSize(d,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(d,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";thisTime.push([e,g,k]);break;default:if(k==="고유에픽"){temp=currentList_goyu[Math.floor(Math.random()*currentList_goyu.length)]}else{if(k==="에픽"){var h=[];for(b=0;b<currentList.length;b++){if((currentList[b]["sort1"]===input.type||currentList[b]["sort2"]===input.type||currentList[b]["sort3"]===input.type)&&((playMode==="normal"&&currentList[b]["level"]===input.level)||(playMode!=="normal"&&input.level.indexOf(currentList[b]["level"])>=0))){h.push(currentList[b])}}temp=h[Math.floor(Math.random()*h.length)]}}$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" epic";$("#item_name"+e.toString()).innerHTML=temp.name;$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";var a="field_"+temp.sort1+"_"+temp.sort2+"_"+temp.sort3;$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+e.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";$("#effect_appear"+e.toString()).style.top=(-235+25+($("#item_img"+e.toString()).offsetHeight/2)).toString()+"px";$("#effect_appear"+e.toString()).style.visibility="visible";thisTime.push([e,g,"에픽",temp])}break;case"조각":var h=[];for(var b=0;b<currentList.length;b++){if((currentList[b]["sort1"]===input.type||currentList[b]["sort2"]===input.type||currentList[b]["sort3"]===input.type)&&((playMode==="normal"&&currentList[b]["level"]===input.level)||(playMode!=="normal"&&input.level.indexOf(currentList[b]["level"])>=0))){h.push(currentList[b])}}temp=h[Math.floor(Math.random()*h.length)];$("#description"+e.toString()).className+=" jogak";$("#item_name"+e.toString()).className+=" jogak";$("#item_name"+e.toString()).innerHTML=temp.name+" 조각";$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";var a="field_에픽조각";$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+e.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";thisTime.push([e,g,f,temp]);break;case"완성":temp=k;$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" epic";$("#item_name"+e.toString()).innerHTML="(조각 완성) "+temp.name;$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";var a="field_"+temp.sort1+"_"+temp.sort2+"_"+temp.sort3;$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+e.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";$("#effect_appear"+e.toString()).style.top=(-235+25+($("#item_img"+e.toString()).offsetHeight/2)).toString()+"px";$("#effect_appear"+e.toString()).style.visibility="visible";dropItem([e,g,"에픽",temp]);onoff("drop");dropCount=quantity-1;playSfx("epic_appear");update("완성",temp);var i="<span class='equip "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();i+="'><span class='run "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();i+="'>조각 완성 ("+thousand(count)+"회차 									<span class='cost'> - 초대장 : "+thousand(cost.invite)+" / 실질 : "+thousand(cost.invite_real)+")</span>								</span><br />";if(temp.sort1==="방어구"){if(temp.set!==""){i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='set'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='epic'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}else{if(temp.set!==""){i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='set'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='epic'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								<span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}i+="</span>";content_text[0]+=i;if($("#record").style.display==="block"){$("#record").innerHTML=content_text[0]}break;case"항아리":temp=k;$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" epic";$("#item_name"+e.toString()).innerHTML="(항아리) "+temp.name;$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";var a="field_"+temp.sort1+"_"+temp.sort2+"_"+temp.sort3;$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+e.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";$("#effect_appear"+e.toString()).style.top=(-235+25+($("#item_img"+e.toString()).offsetHeight/2)).toString()+"px";$("#effect_appear"+e.toString()).style.visibility="visible";playSfx("item_drop");dropItem([e,g,"에픽",temp]);onoff("drop");dropCount=quantity-1;playSfx("epic_appear");update("항아리",temp);var i="<span class='equip "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();i+="'><span class='run "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();i+="'>항아리 ("+thousand(count)+"회차 									<span class='cost'> - 초대장 : "+thousand(cost.invite)+" / 실질 : "+thousand(cost.invite_real)+")</span>								</span><br />";if(temp.sort1==="방어구"){if(temp.set!==""){i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='set'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='epic'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}else{if(temp.set!==""){i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='set'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{i+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='epic'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								<span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}i+="</span>";content_text[0]+=i;if($("#record").style.display==="block"){$("#record").innerHTML=content_text[0]}break;case"초대장":$("#description"+e.toString()).className+=" normal";$("#item_name"+e.toString()).className+=" rare";$("#item_name"+e.toString()).innerHTML="지옥파티 초대장";$("#description"+e.toString()).style.msTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.webkitTransform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";$("#description"+e.toString()).style.transform="translate("+(-$("#item_name"+e.toString()).offsetWidth/2).toString()+"px,0px)";var a="field_초대장";$("#item_img"+e.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+e.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+e.toString()).style.left=(-$("#item_img"+e.toString()).offsetWidth/2).toString()+"px";$("#item_img"+e.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+e.toString()).style.visibility="visible";$("#item_img"+e.toString()).style.visibility="visible";thisTime.push([e,g,f,temp]);break}}function dropItem(a){$("#item_img"+a[0].toString()).className+=" rotate";switch(a[2]){case"에픽":animation($("#effect_appear"+a[0].toString()),"appear",a[0],341,0,-4091,40,0);looting(a[2],a[0],a[1],1,1,1);break;default:looting(a[2],a[0],a[1],1,0,0);break}}function update(k,c,e){if(k==="코스모소울"){get.soul_get+=1;$("#result_soul_get").innerHTML=thousand(get.soul_get);if(!$("#option_soul").checked||get.soul_have<0){if(get.soul_have===-1){$("#result_soul_have").classList.remove("red")}if(get.soul_have===0){$("#result_button_soulDisassemble").disabled="";$("#result_button_soulDisassemble").value="해체"}get.soul_have+=1;$("#result_soul_have").innerHTML=thousand(get.soul_have)}else{cost.invite_real-=cutList[0];$("#cost_real").innerHTML=thousand(cost.invite_real);$("#cost_gold_real").innerHTML=setWon(cost.invite_real*gold+cost.gold_real)}}else{if(k==="지옥구슬"){get.beed_get+=1;$("#result_beed_get").innerHTML=thousand(get.beed_get);cost.invite_real-=cutList[1][input.dungeon];$("#cost_real").innerHTML=thousand(cost.invite_real)}else{if(k==="초대장"){get.invite_get+=1;$("#result_cost_get").innerHTML=thousand(get.invite_get);cost.invite_real-=1;$("#cost_real").innerHTML=thousand(cost.invite_real)}else{if(k==="에픽"||k==="완성"||k==="항아리"){num=0;for(var g=0;g<itemList.length;g++){if(itemList[g]["name"]===c.name){num=g;break}}get.epic_get+=1;$("#result_epic_get").innerHTML=thousand(get.epic_get);if(get.epic_have===0){$("#result_button_epicDisassemble").disabled="";$("#result_button_epicDisassemble").value="해체"}get.epic_have+=1;$("#result_epic_have").innerHTML=thousand(get.epic_have);itemList[num]["get"]+=1;itemList[num]["have"]+=1;if(itemList[num]["have"]===1){itemList[num]["firstCount"]=count;itemList[num]["firstInvite"]=cost.invite;itemList[num]["firstReal"]=cost.invite_real}if(itemList[num]["have"]===1){collect+=1;var l=Math.floor((collect/itemList.length)*1000)/10;$("#inventory_check_collect").innerHTML=l.toString()}}else{if(k==="조각"){num=0;for(var g=0;g<itemList.length;g++){if(itemList[g]["name"]===c.name){num=g;break}}if(!e){e=1}itemList[num]["jogak"]+=e;if(itemList[num]["jogak"]-e<maxJogak&&itemList[num]["jogak"]>=maxJogak){$("#shift4").classList.add("ready");clearTimeout(autoEffect.jogak);animation($("#shift4_effect"),"appear","jogak",682,0,-8182,80,0)}}}}}}if(k==="에픽"||k==="완성"||k==="항아리"){var o=$("#inventory_row_"+num);o.getElementsByTagName("td")[4].innerHTML=itemList[num]["have"].toString();if(o.getElementsByTagName("td")[5].innerHTML===""){o.getElementsByTagName("td")[3].innerHTML="				<a href='javascript:void(0);' onclick='recycle("+num.toString()+",1);' >해체</a>"}if(o.getElementsByTagName("td")[5].innerHTML===""){var p="";p+=thousand(itemList[num]["firstCount"])+"회차 ";if(k==="에픽"){p+="(드랍)"}else{if(k==="완성"){p+="<span class='yellow'>(완성)</span>"}else{if(k==="항아리"){p+="<span class='set'>(항아리)</span>"}}}p+="				<br/><span class='cost'>(초대장 : "+thousand(itemList[num]["firstInvite"])+"				<br/>/ 실질 : "+thousand(itemList[num]["firstReal"])+")";o.getElementsByTagName("td")[5].innerHTML=p}if(o.className.indexOf("not_show")!==-1){if(c.set!==""){o.getElementsByTagName("td")[0].classList.add("color_set")}else{o.getElementsByTagName("td")[0].classList.add("color_epic")}}o.classList.remove("not_show");o.classList.add("show");if(itemList[num]["set"]!==""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var g=0;g<temp2;g++){if($("#set_row_"+g.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[num]["name"])!==-1){var h=$("#set_row_"+g.toString());break}}h.getElementsByTagName("td")[4].innerHTML=itemList[num]["have"].toString();if(h.getElementsByTagName("td")[5].innerHTML===""){h.getElementsByTagName("td")[3].innerHTML="					<a href='javascript:void(0);' onclick='recycle("+num.toString()+",1);' >해체</a>"}if(h.getElementsByTagName("td")[5].innerHTML===""){var p="";p+=thousand(itemList[num]["firstCount"])+"회차 ";p+="					<br/><span class='cost'>(초대장 : "+thousand(itemList[num]["firstInvite"])+"					<br/>/ 실질 : "+thousand(itemList[num]["firstReal"])+")";if(k==="에픽"){p+="(드랍)"}else{if(k==="완성"){p+="<span class='yellow'>(완성)</span>"}else{if(k==="항아리"){p+="<span class='set'>(항아리)</span>"}}}h.getElementsByTagName("td")[5].innerHTML=p}if(h.className.indexOf("not_show")!==-1){h.getElementsByTagName("td")[0].classList.add("color_set")}h.classList.remove("not_show");h.classList.add("show");temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var g=0;g<temp2;g++){if($("#set_row_"+g.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[num]["set"])!==-1){var f=$("#set_row_"+g.toString());break}}var n=0;var m=0;for(var g=0;g<itemList.length;g++){if(itemList[g]["set"]===f.getElementsByTagName("td")[0].innerHTML){if(itemList[g]["have"]>0){n+=1}m+=1}}f.getElementsByTagName("td")[4].innerHTML=n.toString()+"/"+m.toString();if(n<m){f.getElementsByTagName("td")[0].classList.remove("color_epic");f.getElementsByTagName("td")[5].innerHTML=""}else{f.getElementsByTagName("td")[0].classList.add("color_epic");if(f.getElementsByTagName("td")[5].innerHTML===""){f.getElementsByTagName("td")[5].innerHTML="							"+thousand(count)+"회차							<span class='cost'><br/>(초대장 : "+thousand(cost.invite)+"							<br/>/ 실질 : "+thousand(cost.invite_real)+")"}}if(n>0){f.classList.remove("not_show");f.classList.add("show")}else{f.classList.remove("show");f.classList.add("not_show")}}}if(((k==="에픽"||k==="완성"||k==="항아리")&&c.goyu==="")||k==="조각"){var d=$("#craft_row_"+num);if((k==="에픽"||k==="완성"||k==="항아리")){d.getElementsByTagName("td")[3].innerHTML=itemList[num]["have"].toString()}d.getElementsByTagName("td")[4].innerHTML=thousand(itemList[num]["jogak"]);if(itemList[num]["jogak"]<maxJogak){d.getElementsByTagName("td")[4].classList.remove("ready")}else{d.classList.add("available");d.getElementsByTagName("td")[4].classList.add("ready")}if(itemList[num]["jogak"]>=maxJogak){d.getElementsByTagName("td")[5].className="col_6 button";d.getElementsByTagName("td")[5].innerHTML="제작";d.getElementsByTagName("td")[5].onclick=(function(a){return function(){make(a,1)}})(num)}if(k==="조각"){if(d.className.indexOf("not_show")!==-1){if(c.set!==""){d.getElementsByTagName("td")[0].classList.add("color_set")}else{d.getElementsByTagName("td")[0].classList.add("color_epic")}}d.classList.remove("not_show");d.classList.add("show")}}checkObjective("update");if(k==="에픽"||k==="완성"||k==="항아리"){if(myCharacter!==""&&(c["class"]===""||c["class"].indexOf(myCharacter)>=0)){setEquip()}}}function recycle(g,f,d){var c=itemList[g]["sort3"];if(itemList[g]["sort1"]==="무기"){c=itemList[g]["sort1"]}if(itemList[g]["have"]===1&&wearingList[c]===itemList[g]){if(d!=="skip"){alert("※ 경고 : "+itemList[g]["name"]+"을(를) 해체하려면 장비 장착 메뉴에서 해당 장비를 장착해제 하세요.")}return}if(!$("#inventory_check_confirm").checked||!$("#set_check_confirm").checked){if(!confirm("'"+itemList[g]["name"]+"' 을(를) "+f.toString()+"개 해체하시겠습니까?\n(보유 수량 : "+itemList[g]["have"].toString()+")")){return}}itemList[g]["have"]-=f;get.epic_have-=f;$("#result_epic_have").innerHTML=thousand(get.epic_have);if(get.epic_have===0){$("#result_button_epicDisassemble").disabled="disabled";$("#result_button_epicDisassemble").value="없음"}var h=$("#inventory_row_"+g);h.getElementsByTagName("td")[4].innerHTML=itemList[g]["have"].toString();if(itemList[g]["set"]!==""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var e=0;e<temp2;e++){if($("#set_row_"+e.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[g]["name"])!==-1){tr2=$("#set_row_"+e.toString());break}}tr2.getElementsByTagName("td")[4].innerHTML=itemList[g]["have"].toString()}if(!$("#option_soul").checked){var m=disCount("코스모소울",itemList[g]["level"]);if(get.soul_have<=0&&get.soul_have+m>0){$("#result_soul_have").classList.remove("red");$("#result_button_soulDisassemble").disabled="";$("#result_button_soulDisassemble").value="해체"}get.soul_have+=m;$("#result_soul_have").innerHTML=thousand(get.soul_have)}else{cost.invite_real-=disCount("초대장",itemList[g]["level"])*f;$("#cost_real").innerHTML=thousand(cost.invite_real);$("#cost_gold_real").innerHTML=setWon(cost.invite_real*gold+cost.gold_real)}if(itemList[g]["have"]===0){itemList[g]["firstCount"]=0;itemList[g]["firstInvite"]=0;itemList[g]["firstReal"]=0;itemList[g]["enchant"]=0;collect-=1;var k=Math.floor((collect/itemList.length)*1000)/10;$("#inventory_check_collect").innerHTML=k.toString();h.getElementsByTagName("td")[3].innerHTML="없음";h.getElementsByTagName("td")[5].innerHTML="";h.getElementsByTagName("td")[0].classList.remove("color_epic","color_set");h.classList.remove("show");h.classList.add("not_show");if(itemList[g]["set"]!==""){tr2.getElementsByTagName("td")[3].innerHTML="없음";tr2.getElementsByTagName("td")[5].innerHTML="";tr2.getElementsByTagName("td")[0].classList.remove("color_epic","color_set");tr2.classList.remove("show");tr2.classList.add("not_show");temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var e=0;e<temp2;e++){if($("#set_row_"+e.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[g]["set"])!==-1){tr_set=$("#set_row_"+e.toString());break}}var n=0;var l=0;for(var e=0;e<itemList.length;e++){if(itemList[e]["set"]===tr_set.getElementsByTagName("td")[0].innerHTML){if(itemList[e]["have"]>0){n+=1}l+=1}}tr_set.getElementsByTagName("td")[4].innerHTML=n.toString()+"/"+l.toString();if(n<l){tr_set.getElementsByTagName("td")[0].classList.remove("color_epic","color_set");tr_set.getElementsByTagName("td")[5].innerHTML=""}else{tr_set.getElementsByTagName("td")[0].classList.add("color_epic");tr_set.getElementsByTagName("td")[5].innerHTML="						"+thousand(count)+"회차						<span class='cost'><br/>(초대장 : "+thousand(cost.invite)+"						<br/>/ 실질 : "+thousand(cost.invite_real)+")"}if(n>0){tr_set.classList.remove("not_show");tr_set.classList.add("show")}else{tr_set.classList.remove("show");tr_set.classList.add("not_show")}}}checkObjective("update")}function make(b,e){if(runningState!==""){alert("※ 경고 : 탐색 중에는 아이템 제작을 할 수 없습니다.");return}if(!confirm("'"+itemList[b]["name"]+"' 을(를) "+e.toString()+"개 제작하시겠습니까?\n(코스모소울 "+soulCount(itemList[b]["level"])+"개가 무조건 소모됩니다.)\n(코스모소울 수량이 음수가 되면, 0이 될 떄 까지 실질 초대장 소모량이 감소하지 않습니다.)")){return}var d=$("#craft_row_"+b);get.soul_have-=soulCount(itemList[b]["level"]);$("#result_soul_have").innerHTML=thousand(get.soul_have);if(get.soul_have<=0){$("#result_button_soulDisassemble").disabled="disabled";$("#result_button_soulDisassemble").value="없음"}if(get.soul_have<0){$("#result_soul_have").classList.add("red")}itemList[b]["jogak"]-=maxJogak;d.getElementsByTagName("td")[4].innerHTML=thousand(itemList[b]["jogak"]);if(itemList[b]["jogak"]<maxJogak){d.getElementsByTagName("td")[4].classList.remove("ready")}else{d.getElementsByTagName("td")[4].classList.add("ready")}if(itemList[b]["jogak"]===0){d.classList.remove("show");d.classList.add("not_show")}if(itemList[b]["jogak"]<maxJogak){d.classList.remove("available");d.getElementsByTagName("td")[5].className="col_6";d.getElementsByTagName("td")[5].innerHTML="불가";d.getElementsByTagName("td")[5].onclick=""}shift("");for(var c=0;c<maxQuantity;c++){coordinate[c-1]=[0,0];$("#item"+c.toString()).style.msTransform="translate(0px,0px)";$("#item"+c.toString()).style.webkitTransform="translate(0px,0px)";$("#item"+c.toString()).style.transform="translate(0px,0px)";$("#description"+c.toString()).className="description";$("#item_name"+c.toString()).className="item_name";$("#item_name"+c.toString()).style.visibility="hidden";$("#description"+c.toString()).style.msTransform="translate(0px,0px)";$("#description"+c.toString()).style.webkitTransform="translate(0px,0px) rotateY(0deg)";$("#description"+c.toString()).style.transform="translate(0px,0px) rotateY(0deg)";$("#item_img"+c.toString()).style.visibility="hidden";$("#effect_appear"+c.toString()).style.visibility="hidden";$("#effect_land"+c.toString()).style.visibility="hidden";$("#effect_wait"+c.toString()).style.visibility="hidden";clearTimeout(autoLooting[c-1]);clearTimeout(autoEffect.appear[c-1]);clearTimeout(autoEffect.land[c-1]);clearTimeout(autoEffect.wait[c-1]);$("#item_img"+c.toString()).className="item_img"}var a=Math.floor(Math.random()*coopList[input.dungeon].length);var f=coopList[input.dungeon];getItem("완성",itemList[b],a,f)}function looting(f,e,g,c,i,k,b,h,d){if(c===1){var b=g[e][0];var h=g[e][1];var d=5;$("#item"+e.toString()).style.zIndex=900-(g[e][1]*10)}if(c<12){coordinate[e-1][0]+=b;coordinate[e-1][1]-=h;var a=coordinate[e-1][0].toString()+"px,"+coordinate[e-1][1].toString()+"px";$("#item"+e.toString()).style.msTransform="translate("+a+")";$("#item"+e.toString()).style.webkitTransform="translate("+a+") rotateY(0deg)";$("#item"+e.toString()).style.transform="translate("+a+") rotateY(0deg)";c+=1;h-=d;autoLooting[e-1]=setTimeout(function(){looting(f,e,g,c,i,k,b,h,d)},50)}else{if(i===1){playSfx("epic_land")}$("#item_img"+e.toString()).className="item_img";dropCount+=1;if(dropCount===quantity){if(gabrielSetting.trading===false&&runningState===""){onoff(0)}}if(k===1){if(myCharacter==="beckey"){playSfx("beckey_epic")}$("#effect_land"+e.toString()).style.top=(-161+25+($("#item_img"+e.toString()).offsetHeight/2)).toString()+"px";$("#effect_land"+e.toString()).style.visibility="visible";animation($("#effect_land"+e.toString()),"land",e,604,0,-4227,150,0);$("#effect_wait"+e.toString()).style.top=(-98+25+($("#item_img"+e.toString()).offsetHeight/2)).toString()+"px";$("#effect_wait"+e.toString()).style.visibility="visible";animation($("#effect_wait"+e.toString()),"wait",e,188,0,-2255,100,1)}}}function animation(h,e,c,b,d,a,g,f){switch(c){case"jogak":if(d-b>=a){h.style.display="block";h.style.backgroundPosition=(d-b).toString()+"px 0px";autoEffect.jogak=setTimeout(function(){animation(h,e,c,b,d-b,a,g,f)},g)}else{h.style.display="none"}break;default:if(d-b>=a){h.style.backgroundPosition=(d-b).toString()+"px 0px";autoEffect[e][c-1]=setTimeout(function(){animation(h,e,c,b,d-b,a,g,f)},g)}else{if(f===1){h.style.backgroundPosition="0px 0px";autoEffect[e][c-1]=setTimeout(function(){animation(h,e,c,b,0,a,g,f)},g)}else{h.style.visibility="hidden"}}}}function setEquip(e,a,d){if(!e){for(var b=0;b<partList.length;b++){clearSelect($("#list_"+partList[b]+"_select"));var c=document.createElement("option");c.value="";if(myCharacter!=="beckey"){c.innerHTML="Lv.60 | 마법으로 봉인된 모험가 "+partList[b]}else{c.innerHTML="Lv.60 | 베키의 망가진 "+partList[b]}$("#list_"+partList[b]+"_select").add(c)}for(var b=0;b<itemList.length;b++){if((itemList[b]["class"]===""||itemList[b]["class"].indexOf(myCharacter)>=0)&&itemList[b]["have"]>0){var c=document.createElement("option");c.value=itemList[b]["name"];c.innerHTML="Lv."+itemList[b]["level"]+" | "+itemList[b]["name"];if(itemList[b]["sort1"]==="무기"){$("#list_"+itemList[b]["sort1"]+"_select").add(c)}else{$("#list_"+itemList[b]["sort3"]+"_select").add(c)}}}for(var b=0;b<partList.length;b++){(function(g){if(wearingList[partList[g]]!==null){for(var f=0;f<$("#list_"+partList[g]+"_select").options.length;f++){if($("#list_"+partList[g]+"_select").options[f].value===wearingList[partList[g]]["name"]){$("#list_"+partList[g]+"_select").selectedIndex=f;setEquip(partList[g],$("#list_"+partList[g]+"_select").value,"noSound");break}}}$("#list_"+partList[g]+"_select").onchange=function(){setEquip(partList[g],$("#list_"+partList[g]+"_select").value)}})(b)}}else{if(a===""){wearingList[e]=null;$("#list_"+e+"_icon").style.backgroundPosition="0px 0px";$("#list_"+e+"_enchant").innerHTML="+0";$("#list_"+e+"_set").innerHTML="";$("#state_"+e+"_icon").style.backgroundPosition="0px 0px";$("#state_"+e+"_enchant").innerHTML="+0";if(!d){playSfx("wearing")}setPower();saveData()}else{for(var b=0;b<itemList.length;b++){if(itemList[b]["name"]===a){wearingList[e]=itemList[b];break}}$("#list_"+e+"_icon").style.backgroundPosition=spritePosition(wearingList[e]["icon"],1);$("#list_"+e+"_enchant").innerHTML="+"+wearingList[e]["enchant"];$("#list_"+e+"_set").innerHTML=wearingList[e]["set"];$("#state_"+e+"_icon").style.backgroundPosition=spritePosition(wearingList[e]["icon"],1);$("#state_"+e+"_enchant").innerHTML="+"+wearingList[e]["enchant"];if(!d){playSfx("wearing")}setPower();saveData()}}}function calcPower(m){if(typeof(m)!="object"){var d=m;var k=0;if(d==="무기"){k=pplList.lv0*3}else{if(d==="보조장비"||d==="마법석"){k=pplList.lv0*2}else{k=pplList.lv0}}return{power:k,setted:0}}var e=0;var c="";if(m.sort1==="무기"){c="무기"}else{c=m.sort3}var b="lv"+m.level.toString();switch(c){case"무기":e+=pplList[b]*3;break;case"보조장비":e+=pplList[b]*2;break;case"마법석":e+=pplList[b]*2;break;default:e+=pplList[b];break}var g=m.enchant;for(var f=0;f<=g;f++){if(f>0&&f<=5){e+=eplList[b][0]}else{if(f>5&&f<=10){e+=eplList[b][1]}else{if(f>10&&f<=12){e+=eplList[b][2]}else{if(f>12&&f<=15){e+=eplList[b][3]}}}}if(f>15&&f<=20){e+=eplList[b][4]}}var h=m.set;var l=0;var a=[0,0];for(var f=0;f<partList.length;f++){if(wearingList[partList[f]]!==null&&wearingList[partList[f]]["set"]===h){a[0]+=1}}for(var f=0;f<itemList.length;f++){if(itemList[f]["set"]===h){a[1]+=1}}if(a[0]===a[1]){e*=1.5;l=1}return{power:e,set:l}}function setPower(){if(playMode!=="normal"){var b=0;var a={};for(var c=0;c<partList.length;c++){if(wearingList[partList[c]]===null){a=calcPower(partList[c]);b+=a.power}else{a=calcPower(wearingList[partList[c]]);b+=a.power}$("#list_"+partList[c]+"_power").innerHTML="전투력 : "+thousand(a.power);if(a.set===1){$("#list_"+partList[c]+"_type").classList.add("set")}else{$("#list_"+partList[c]+"_type").classList.remove("set")}}if(myCharacter==="beckey"){b*=2}power=b;$("#character_power").innerHTML=thousand(power)}}function doEnchant(d,a,c){switch(c){case 0:enchantList.enchanting=1;for(var b=1;b<=5;b++){$("#shift"+b.toString()).disabled="disabled"}$("#shift_chance").disabled="disabled";for(var b=0;b<partList.length;b++){(function(e){$("#list_"+partList[e]+"_enchant_run").disabled="disabled"})(b)}$("#enchant_icon").className="";$("#enchant_icon").style.backgroundPosition=spritePosition(d.icon,1);$("#enchant_text").innerHTML="강화 중...";$("#enchant_text").className="enchanting";playSfx("enchant_progress",["enchant_success","enchant_fail","enchant_zero"]);$("#enchant_progress_bar").style.width=($("#enchant_progress_bar").offsetWidth+5).toString()+"px";setTimeout(function(){doEnchant(d,a,1)},16);break;case 1:if($("#enchant_progress_bar").offsetWidth+5<$("#enchant_progress").offsetWidth){$("#enchant_progress_bar").style.width=($("#enchant_progress_bar").offsetWidth+5).toString()+"px";setTimeout(function(){doEnchant(d,a,1)},16)}else{endEnchant(d,a)}break}}function endEnchant(f,b){var h=f.name;var e=f.icon;var d=f.enchant;var a=enchantList.cost[d];var g=enchantList.chance[d];cost.gold+=a;cost.gold_real+=a;$("#cost_gold").innerHTML=setWon(cost.invite*gold+cost.gold);$("#cost_gold_real").innerHTML=setWon(cost.invite_real*gold+cost.gold_real);var k=0;if(Math.random()<=g){k=1}else{k=0}switch(k){case 1:playSfx("enchant_success",["enchant_progress"]);$("#enchant_text").className="";$("#enchant_text").innerHTML="+"+(f.enchant+1).toString()+"단계 강화 <span class='set'>성공!</span> (+"+f.enchant.toString()+" -> +"+(f.enchant+1).toString()+")";$("#enchant_progress_bar").style.width="0px";f.enchant+=1;setEquip(b,f.name,"noSound");saveData();break;case 0:if(f.enchant<10){playSfx("enchant_fail",["enchant_progress"])}else{playSfx("enchant_zero",["enchant_progress"])}$("#enchant_text").className="";$("#enchant_text").innerHTML="+"+(f.enchant+1).toString()+"단계 강화 <span class='red'>실패!</span> (+"+f.enchant.toString()+" -> +"+(f.enchant+enchantList.drop[f.enchant]).toString()+")";$("#enchant_progress_bar").style.width="0px";f.enchant+=enchantList.drop[f.enchant];setEquip(b,f.name,"noSound");saveData();break}enchantList.enchanting=0;for(var c=1;c<=5;c++){(function(l){$("#shift"+l.toString()).disabled=""})(c)}if(playMode==="normal"){$("#shift_chance").disabled=""}for(var c=0;c<partList.length;c++){(function(l){$("#list_"+partList[l]+"_enchant_run").disabled=""})(c)}}function setPotOpen(a){switch(a){case"tradable":$("#pot_type").disabled="";if(playMode==="normal"){$("#pot_tradable").disabled=""}else{$("#pot_tradable").disabled="disabled"}$("#pot_open").className="";$("#pot_open").value="개봉 (∞)";if(runningState===""){$("#pot_open").disabled=""}break;case"notTradable":$("#pot_type").disabled="";if(playMode==="normal"){$("#pot_tradable").disabled=""}else{$("#pot_tradable").disabled="disabled"}$("#pot_open").className="";$("#pot_open").value="개봉 ("+tower.toString()+")";if(tower>0&&runningState===""){$("#pot_open").disabled=""}else{$("#pot_open").disabled="disabled"}break;case"cancel":$("#pot_type").disabled="disabled";$("#pot_tradable").disabled="disabled";$("#pot_open").className="cancel";$("#pot_open").value="개봉 취소";break}}function openPot(m,b,c){switch(c){case 0:$("#popup_pot").style.display="block";onoff("pot");var o="";if(b==="tradable"){o="교환 가능"}else{o="교환 불가"}$("#popup_pot_message").innerHTML="영웅의 "+m+" 항아리 ("+o+") : "+setWon(potList.cost[b])+" Gold";playSfx("pot_opening");$("#popup_pot_progress_bar").style.width=($("#popup_pot_progress_bar").offsetWidth+3).toString()+"px";setTimeout(function(){openPot(m,b,1)},16);break;case 1:if(potList.opening===0){$("#popup_pot_progress_bar").style.width="0px";onoff(0);$("#popup_pot").style.display="none";if(!sfxList.pot_opening.paused){sfxList.pot_opening.pause();sfxList.pot_opening.currentTime=0}setPotOpen($("#pot_tradable").value);return}if($("#popup_pot_progress_bar").offsetWidth+3<$("#popup_pot_progress").offsetWidth){$("#popup_pot_progress_bar").style.width=($("#popup_pot_progress_bar").offsetWidth+3).toString()+"px";setTimeout(function(){openPot(m,b,1)},16)}else{openPot(m,b,2)}break;case 2:cost.gold+=potList.cost[b];cost.gold_real+=potList.cost[b];$("#cost_gold").innerHTML=setWon(cost.invite*gold+cost.gold);$("#cost_gold_real").innerHTML=setWon(cost.invite_real*gold+cost.gold_real);if(b==="notTradable"){tower-=1}var g=[];var d=[];var p=[];switch(m){case"무기":for(var f=0;f<itemList.length;f++){if(itemList[f]["sort1"]==="무기"&&itemList[f]["class"].indexOf(myCharacter)>=0&&itemList[f]["goyu"]===""){g.push(itemList[f]);if(d.indexOf(itemList[f]["level"])<0){d.push(itemList[f]["level"]);p[d.indexOf(itemList[f]["level"])]=0}p[d.indexOf(itemList[f]["level"])]+=1}}break;default:for(var f=0;f<itemList.length;f++){if(itemList[f]["sort3"]===m&&itemList[f]["goyu"]===""){g.push(itemList[f]);if(d.indexOf(itemList[f]["level"])<0){d.push(itemList[f]["level"]);p[d.indexOf(itemList[f]["level"])]=0}p[d.indexOf(itemList[f]["level"])]+=1}}break}for(var f=0;f<d.length;f++){for(var e=0;e<potList[m]["name"].length;e++){if(potList[m]["name"][e].indexOf(d[f])>=0){p[f]*=potList[m]["num"][e]}}}var a=d[rand(p)];var l=[];for(var f=0;f<g.length;f++){if(g[f]["level"]===a){l.push(g[f])}}var k=l[Math.floor(Math.random()*l.length)];potList.opening=0;$("#popup_pot_progress_bar").style.width="0px";onoff(0);$("#popup_pot").style.display="none";if(!sfxList.pot_opening.paused){sfxList.pot_opening.pause();sfxList.pot_opening.currentTime=0}setPotOpen($("#pot_tradable").value);for(var f=0;f<maxQuantity;f++){coordinate[f-1]=[0,0];$("#item"+f.toString()).style.msTransform="translate(0px,0px)";$("#item"+f.toString()).style.webkitTransform="translate(0px,0px)";$("#item"+f.toString()).style.transform="translate(0px,0px)";$("#description"+f.toString()).className="description";$("#item_name"+f.toString()).className="item_name";$("#item_name"+f.toString()).style.visibility="hidden";$("#description"+f.toString()).style.msTransform="translate(0px,0px)";$("#description"+f.toString()).style.webkitTransform="translate(0px,0px) rotateY(0deg)";$("#description"+f.toString()).style.transform="translate(0px,0px) rotateY(0deg)";$("#item_img"+f.toString()).style.visibility="hidden";$("#effect_appear"+f.toString()).style.visibility="hidden";$("#effect_land"+f.toString()).style.visibility="hidden";$("#effect_wait"+f.toString()).style.visibility="hidden";clearTimeout(autoLooting[f-1]);clearTimeout(autoEffect.appear[f-1]);clearTimeout(autoEffect.land[f-1]);clearTimeout(autoEffect.wait[f-1]);$("#item_img"+f.toString()).className="item_img"}var n=Math.floor(Math.random()*coopList[input.dungeon].length);var h=coopList[input.dungeon];getItem("항아리",k,n,h);saveData();break}}function ending(a){switch(a){case 0:playSfx("anton_scream");$("#frame_cover").style.opacity="0.1";$("#frame_cover").style.display="block";setTimeout(function(){ending(a+1)},250);break;case 10:if(!sfxList.anton_scream.paused){sfxList.anton_scream.pause()}$("#ending_character").innerHTML=characterList[myCharacter]["name"];$("#ending_count").innerHTML=thousand(count)+"회";$("#ending_date").innerHTML=thousand(dateState.date)+"일";$("#ending_invite").innerHTML=thousand(cost.invite_real)+"장";$("#ending_gold").innerHTML=setWon(cost.invite_real*gold+cost.gold_real)+" Gold";$("#ending_power").innerHTML=thousand(power);$("#frame_cover").style.opacity="0";$("#frame_cover").style.display="none";if(myCharacter==="beckey"){$("#wrapper").style.display="none";$("#beckey_ending").style.display="block";playBGM("beckey");beckeyEnding(0)}else{$("#wrapper").style.display="none";$("#ending").style.display="block";playBGM("rpg_clear");setTimeout(function(){$("#ending_confirm").className="able";$("#ending_confirm").disabled="";$("#ending_confirm").onclick=function(){$("#ending_confirm").className="";$("#ending_confirm").disabled="disabled";$("#ending").style.display="none";$("#wrapper").style.display="block";playBGM($("#bgm_type").value)}},2000)}break;default:$("#frame_cover").style.opacity=((a+1)/10).toString();setTimeout(function(){ending(a+1)},250);break}}function beckeyEnding(a){$("#beckey_ending_picture").style.backgroundImage="url('./images/epic/beckey_ending/beckey_ending_"+a.toString()+".jpg')";if(a<12){$("#beckey_ending_picture").onclick=function(){beckeyEnding(a+1)}}$("#beckey_ending_button_first").onclick=function(){beckeyEnding(0)};if(a<12){$("#beckey_ending_button_end").disabled="disabled";$("#beckey_ending_button_end").value="사진을 클릭하세요 ("+(a+1).toString()+"/13)"}else{$("#beckey_ending_button_end").disabled="";$("#beckey_ending_button_end").value="플레이 결과 정산";$("#beckey_ending_button_end").onclick=function(){$("#beckey_ending").style.display="none";$("#ending").style.display="block";playBGM("rpg_clear");setTimeout(function(){$("#ending_confirm").className="able";$("#ending_confirm").disabled="";$("#ending_confirm").onclick=function(){$("#ending_confirm").className="";$("#ending_confirm").disabled="disabled";$("#ending").style.display="none";$("#wrapper").style.display="block";playBGM($("#bgm_type").value)}},2000)}}}function stopBGM(){switch(bgm){case"beckey":if(!bgmList.beckey.paused){bgmList.beckey.currentTime=0;bgmList.beckey.pause()}break;case"hell":if(!bgmList.hell.paused){bgmList.hell.currentTime=0;bgmList.hell.pause()}break;case"rpg_clear":if(!bgmList.rpg_clear.paused){bgmList.rpg_clear.currentTime=0;bgmList.rpg_clear.pause()}break;default:if(!bgmList[bgm.toString()].paused){bgmList[bgm.toString()].currentTime=0;bgmList[bgm.toString()].pause()}break}}function playSfx(c,a){if(c){if($("#option_sound").checked){if(sfxList[c].paused){sfxList[c].play()}else{sfxList[c].currentTime=0}}}if(a){if(!$("#option_sound").disabled&&$("#option_sound").checked){for(var b=0;b<a.length;b++){if(!sfxList[a[b]].paused){sfxList[a[b]].pause();sfxList[a[b]].currentTime=0}}}}}function playBGM(a){if(bgm!=="none"){switch(bgm){case"beckey":if($("#option_bgm").checked===false||a!=="beckey"){bgmList.beckey.currentTime=0;bgmList.beckey.pause()}break;case"hell":if($("#option_bgm").checked===false||a!=="hell"){bgmList.hell.currentTime=0;bgmList.hell.pause()}break;case"rpg_clear":if($("#option_bgm").checked===false||a!=="rpg_clear"){bgmList.rpg_clear.currentTime=0;bgmList.rpg_clear.pause()}break;default:bgmList[bgm.toString()].currentTime=0;bgmList[bgm.toString()].pause();break}}if($("#option_bgm").checked===false){bgm="none"}else{if(a!==""){switch(a){case"dungeon":bgmList[input.dungeon.toString()].play();bgm=input.dungeon;break;case"hell":bgmList.hell.play();bgm="hell";break;case"beckey":bgmList.beckey.play();bgm="beckey";break;case"rpg_clear":bgmList.rpg_clear.play();bgm="rpg_clear";break}}}}function onoff(a){switch(a){case 0:$("#start1").disabled="";$("#start2").disabled="";$("#start1").value="1회 실행";$("#start2").value="탐색 실시";$("#dungeon").disabled="";if(playMode==="normal"){$("#difficulty").disabled=""}$("#channel").disabled="";$("#objective_list").disabled="";$("#objective_item_first").disabled="";if($("#objective_item_first").value!==""){$("#objective_item_second").disabled=""}if($("#objective_item_second").value!==""){$("#objective_item_third").disabled=""}if($("#objective_item_third").value!==""){$("#objective_item_name").disabled=""}$("#objective_set_first").disabled="";if($("#objective_set_first").value!==""){$("#objective_set_name").disabled=""}$("#objective_count_text").disabled="";$("#objective_cost_text").disabled="";$("#objective_fatigue_max").disabled="";$("#objective_fatigue_per").disabled="";$("#reset").disabled="";$("#popup_gabriel").style.display="none";break;case 1:$("#start1").disabled="";$("#start2").disabled="disabled";$("#start1").value="실행 중지";$("#start2").value="탐색 실시";$("#dungeon").disabled="disabled";$("#difficulty").disabled="disabled";$("#channel").disabled="disabled";$("#objective_list").disabled="disabled";$("#objective_item_first").disabled="disabled";$("#objective_item_second").disabled="disabled";$("#objective_item_third").disabled="disabled";$("#objective_item_name").disabled="disabled";$("#objective_set_first").disabled="disabled";$("#objective_set_name").disabled="disabled";$("#objective_count_text").disabled="disabled";$("#objective_cost_text").disabled="disabled";$("#objective_fatigue_max").disabled="disabled";$("#objective_fatigue_per").disabled="disabled";$("#reset").disabled="disabled";$("#popup_gabriel").style.display="none";break;case 2:$("#start1").disabled="disabled";$("#start2").disabled="";$("#start1").value="1회 실행";$("#start2").value="탐색 중지";$("#dungeon").disabled="disabled";$("#difficulty").disabled="disabled";$("#channel").disabled="disabled";$("#objective_list").disabled="disabled";$("#objective_item_first").disabled="disabled";$("#objective_item_second").disabled="disabled";$("#objective_item_third").disabled="disabled";$("#objective_item_name").disabled="disabled";$("#objective_set_first").disabled="disabled";$("#objective_set_name").disabled="disabled";$("#objective_count_text").disabled="disabled";$("#objective_cost_text").disabled="disabled";$("#objective_fatigue_max").disabled="disabled";$("#objective_fatigue_per").disabled="disabled";$("#reset").disabled="disabled";$("#popup_gabriel").style.display="none";break;case"gabriel":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="조각 교환 중";$("#start2").value="조각 교환 중";if($("#gabriel_type").value==="manual"){$("#popup_gabriel").style.display="block"}break;case"gabriel_autoFirst":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="조각 교환 중";$("#start2").value="조각 교환 중";$("#popup_gabriel").style.display="block";break;case"drop":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="확인 중";$("#start2").value="확인 중";$("#popup_gabriel").style.display="none";break;case"pot":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="항아리 개봉";$("#start2").value="항아리 개봉";$("#popup_gabriel").style.display="none";break}}function shift(b){var a=0;if(b==="record"){a=1;right_display="record";$("#popup_title").className="title_record";$("#popup_title").innerHTML="획득 기록";$("#record_filter").style.display="block";$("#record").style.display="block";$("#record_check").style.display="block";$("#shift1").classList.add("selected");$("#shift1").value="창 닫기";if($("#record").innerHTML!==content_text[0]){$("#record").innerHTML=content_text[0]}$("#record").scrollTop=$("#record").scrollHeight}else{$("#record_filter").style.display="none";$("#record").style.display="none";$("#record_check").style.display="none";$("#shift1").classList.remove("selected");$("#shift1").value="획득 기록"}if(b==="inventory"){a=1;right_display="inventory";$("#popup_title").className="title_inventory";$("#popup_title").innerHTML="인벤토리";$("#inventory_filter").style.display="block";$("#inventory").style.display="block";$("#inventory_check").style.display="block";$("#shift2").classList.add("selected");$("#shift2").value="창 닫기"}else{$("#inventory_filter").style.display="none";$("#inventory").style.display="none";$("#inventory_check").style.display="none";$("#shift2").classList.remove("selected");$("#shift2").value="인벤토리"}if(b==="set"){a=1;right_display="set";$("#popup_title").className="title_set";$("#popup_title").innerHTML="세트 현황";$("#set_filter").style.display="block";$("#set").style.display="block";$("#set_check").style.display="block";$("#shift3").classList.add("selected");$("#shift3").value="창 닫기"}else{$("#set_filter").style.display="none";$("#set").style.display="none";$("#set_check").style.display="none";$("#shift3").classList.remove("selected");$("#shift3").value="세트 현황"}if(b==="craft"){a=1;right_display="craft";$("#popup_title").className="title_craft";$("#popup_title").innerHTML="에픽 도감";$("#craft_filter").style.display="block";$("#craft").style.display="block";$("#craft_check").style.display="block";$("#shift4").classList.add("selected");$("#shift4").classList.remove("ready");$("#shift4").value="창 닫기"}else{$("#craft_filter").style.display="none";$("#craft").style.display="none";$("#craft_check").style.display="none";$("#shift4").classList.remove("selected");$("#shift4").value="에픽 도감"}if(b==="equip"){a=1;right_display="equip";$("#popup_title").className="title_equip";$("#popup_title").innerHTML="장비 장착";$("#equip_state").style.display="block";if(myCharacter===""){$("#equip_notice").style.display="table";$("#equip_list").style.display="none"}else{$("#equip_notice").style.display="none";$("#equip_list").style.display="block"}$("#equip_enchant").style.display="block";$("#equip_character").style.display="block";$("#shift5").classList.add("selected");$("#shift5").classList.remove("ready");$("#shift5").value="닫기"}else{$("#equip_state").style.display="none";$("#equip_notice").style.display="none";$("#equip_list").style.display="none";$("#equip_enchant").style.display="none";$("#equip_character").style.display="none";$("#shift5").classList.remove("selected");$("#shift5").value="장착"}if(b==="chance"){a=2;right_display="chance";$("#popup_chance").style.display="block";$("#popup_chance_main").scrollTop=0}else{$("#popup_chance").style.display="none"}if(a===1){$("#popup").style.display="block";$("#checkbox").style.display="block";if(b==="record"){$("#record").scrollTop=$("#record").scrollHeight}}else{$("#popup").style.display="none";$("#checkbox").style.display="none";right_display="none"}if(a>0){playSfx("open")}else{playSfx("close")}}function setChance(g){var e=[["어려움","매우어려움"],["노멀","익스퍼트","마스터","킹","슬레이어"],["에픽 아이템","코스모 소울","지옥 구슬"]];var c=0;function f(k,l){var h;var i=(""+k).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!i){h=0}else{h=Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0))}if(!l){k=k.toFixed(h)+3}else{k=(k*l).toFixed(Math.max(0,h-Math.log(l)+3))}return parseFloat(k)}for(var d=1;d<=e[0].length;d++){for(var b=1;b<=e[1].length;b++){c=0;for(var a=1;a<=e[2].length;a++){switch(g){case"show":$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=f(chanceList_num[1][d-1][b-1][a],100).toString();break;case"reset":$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=f(chanceList_num_default[1][d-1][b-1][a],100).toString();chanceList_num[1][d-1][b-1][a]=chanceList_num_default[1][d-1][b-1][a];break;case"perfect":if(a===1){$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=100;chanceList_num[1][d-1][b-1][a]=1}else{$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=0;chanceList_num[1][d-1][b-1][a]=0}case"apply":if(!isNumber($("#chance_text_"+d.toString()+b.toString()+a.toString()).value)){alert('※ 경고 : "'+e[0][d-1]+'" & "'+e[1][b-1]+'" 난이도의 "'+e[2][a-1]+'" 드랍률이 숫자가 아닙니다.');return}else{if($("#chance_text_"+d.toString()+b.toString()+a.toString()).value===""){$("#chance_text_"+d.toString()+b.toString()+a.toString()).value="0"}}c+=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+a.toString()).value),0.01);break}}switch(g){case"reset":chanceList_num[1][d-1][b-1][0]=chanceList_num_default[1][d-1][b-1][0];break;case"perfect":chanceList_num[1][d-1][b-1][0]=0;break;case"apply":if(c>1){alert('※ 경고 : "'+e[0][d-1]+'" & "'+e[1][b-1]+'" 난이도의 드랍률의 합계가 100%를 넘습니다.');return}chanceList_num[1][d-1][b-1][0]=1-c;chanceList_num[1][d-1][b-1][1]=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+"1").value),0.01);chanceList_num[1][d-1][b-1][2]=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+"2").value),0.01);chanceList_num[1][d-1][b-1][3]=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+"3").value),0.01);break}}}switch(g){case"reset":alert("드랍 확률이 초기화되었습니다.");saveData();break;case"perfect":alert("에픽 드랍률이 100%가 되었습니다.");saveData();break;case"apply":alert("드랍 확률이 정상적으로 적용되었습니다.");saveData();break}};