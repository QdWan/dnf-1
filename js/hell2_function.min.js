function loadImages(a,f){var e=[];var b;var d=a.length;for(var c=0;c<a.length;c++){b=new Image();b.onload=function(){document.getElementById("cover_notice").innerHTML="								이미지 로딩 중 ("+Math.round((((a.length-d+1)/a.length)*100),0).toString()+"%)";--d;if(d<=0){f()}};b.onerror=function(){document.getElementById("cover_notice").innerHTML="								이미지 로딩 중 ("+Math.round((((a.length-d+1)/a.length)*100),0).toString()+"%)";--d;if(d<=0){f()}};b.src=a[c];document.getElementById("imagePreloader").innerHTML+="<img src='"+a[c]+"' />";e.push(b)}}function soulCount(b){for(var a=0;a<soulCostList.length;a++){if(soulCostList[a][0]===b){return soulCostList[a][1]}}}function disCount(b,c){switch(b){case"초대장":for(var a=0;a<cutList[2].length;a++){if(cutList[2][a][0]===c){return cutList[2][a][1]}}break;case"코스모소울":for(var a=0;a<cutList[3].length;a++){if(cutList[3][a][0]===c){return cutList[3][a][1]}}break}}function generateInventory(){var h=[];for(var a=0;a<itemList.length;a++){if(itemList[a]["name"]!==""){var k=$("#inventory_table").insertRow(-1);k.id="inventory_row_"+a.toString();k.className="equip";k.className+=" not_show";k.className+=" "+itemList[a]["sort1"];k.className+=" "+itemList[a]["sort2"];k.className+=" "+itemList[a]["sort3"];k.className+=" lv"+itemList[a]["level"].toString();var g=k.insertCell(0);g.innerHTML=itemList[a]["name"];g.className="col_1";var f=k.insertCell(1);if(itemList[a]["sort1"]==="방어구"){f.innerHTML=itemList[a]["sort2"]}else{f.innerHTML=itemList[a]["sort3"]}f.className="col_2";var e=k.insertCell(2);e.innerHTML=itemList[a]["level"].toString();e.className="col_3";var c=k.insertCell(3);c.innerHTML="없음";c.className="col_4";var d=k.insertCell(4);d.innerHTML=itemList[a]["have"].toString();d.className="col_5";var b=k.insertCell(5);b.innerHTML="";b.className="col_6"}}}function generateSet(){var h=[];num=0;for(var a=0;a<itemList.length;a++){if(itemList[a]["name"]!==""){if(itemList[a]["set"]!==""){if(h.indexOf(itemList[a]["set"])===-1){h.push(itemList[a]["set"]);var k=$("#set_table").insertRow(-1);k.id="set_row_"+num.toString();k.className="equip";k.className+=" hap";k.className+=" not_show";temp=0;for(j=0;j<itemList.length;j++){if(itemList[j]["set"]===itemList[a]["set"]){if(k.className!==itemList[j]["sort1"]){k.className+=" "+itemList[j]["sort1"]}if(k.className!==itemList[j]["sort2"]){k.className+=" "+itemList[j]["sort2"]}if(k.className!==itemList[j]["sort3"]){k.className+=" "+itemList[j]["sort3"]}temp+=1}}k.className+=" lv"+itemList[a]["level"].toString();var g=k.insertCell(0);g.innerHTML=itemList[a]["set"];g.className="col_1";var f=k.insertCell(1);f.innerHTML=itemList[a]["sort2"];f.className="col_2";var e=k.insertCell(2);e.innerHTML=itemList[a]["level"].toString();e.className="col_3";var d=k.insertCell(3);d.innerHTML="";d.className="col_4";var c=k.insertCell(4);c.innerHTML="0/"+temp.toString();c.className="col_5";var b=k.insertCell(5);b.innerHTML="";b.className="col_6";num+=1}var k=$("#set_table").insertRow(-1);k.id="set_row_"+num.toString();k.className="equip";k.className+=" not_show";k.className+=" "+itemList[a]["sort1"];k.className+=" "+itemList[a]["sort2"];k.className+=" "+itemList[a]["sort3"];k.className+=" lv"+itemList[a]["level"].toString();var g=k.insertCell(0);g.innerHTML="┗ "+itemList[a]["name"];g.className="col_1";var f=k.insertCell(1);if(itemList[a]["sort1"]==="방어구"){f.innerHTML=itemList[a]["sort2"]}else{f.innerHTML=itemList[a]["sort3"]}f.className="col_2";var e=k.insertCell(2);e.innerHTML=itemList[a]["level"].toString();e.className="col_3";var c=k.insertCell(3);c.innerHTML="없음";c.className="col_4";var d=k.insertCell(4);d.innerHTML=itemList[a]["have"].toString();d.className="col_5";var b=k.insertCell(5);b.innerHTML="";b.className="col_6";num+=1}}}}function generateCraft(){var k=[];for(var a=0;a<itemList.length;a++){if(itemList[a]["name"]!==""&itemList[a]["goyu"]===""){var m=$("#craft_table").insertRow(-1);m.id="craft_row_"+a.toString();m.className="equip";m.className+=" not_show";m.className+=" "+itemList[a]["sort1"];m.className+=" "+itemList[a]["sort2"];m.className+=" "+itemList[a]["sort3"];m.className+=" lv"+itemList[a]["level"].toString();var h=m.insertCell(0);h.innerHTML=itemList[a]["name"];h.className="col_1";var g=m.insertCell(1);if(itemList[a]["sort1"]==="방어구"){g.innerHTML=itemList[a]["sort2"]}else{g.innerHTML=itemList[a]["sort3"]}g.className="col_2";var f=m.insertCell(2);f.innerHTML=itemList[a]["level"].toString();f.className="col_3";var e=m.insertCell(3);e.innerHTML="0";e.className="col_4";var d=m.insertCell(4);d.innerHTML="0";d.className="col_5";var c=m.insertCell(5);c.innerHTML="불가";c.className="col_6";var b=m.insertCell(6);b.innerHTML="<input id='gabriel_checkbox_"+[a]+"' class='gabriel_checkbox' type='checkbox' />";b.className="col_7"}}$("#craft_check_max").innerHTML=thousand(maxJogak);var l=$$(".gabriel_checkbox");for(var a=0;a<l.length;a++){(function(n){l[n].onclick=function(){if(l[n].checked===true){if(gabrielSetting.get!==null){for(var i=0;i<itemList.length;i++){if(itemList[i]["name"]===gabrielSetting.get["name"]){$("#gabriel_checkbox_"+i.toString()).checked=false;break}}}var o=parseInt(l[n].id.split("_")[2]);gabrielSetting.get=itemList[o];l[n].checked=true}else{gabrielSetting.get=null}setGabriel("settingOnly")}})(a)}}function setDate(){var a=dateSettingList;switch(dateState.changed){case 2:a=dateSettingDefault;case 1:dateState.len_wd=Math.ceil(a[0]/a[2])+Math.ceil(a[3]/a[2])+Math.ceil(a[4]/a[2])+Math.ceil(a[5]/a[2])+Math.ceil(a[6]/a[2])+Math.ceil(a[7]/a[2]);dateState.len_we=Math.ceil(a[1]/a[2])+Math.ceil(a[3]/a[2])+Math.ceil(a[4]/a[2])+Math.ceil(a[5]/a[2])+Math.ceil(a[6]/a[2])+Math.ceil(a[7]/a[2]);dateState.date=1;dateState.week=1;dateState.day=dateSettingWeek[0];dateState.dayType=dayTypeList[dateState.day];if(dateCount===0){dateState.remain=dateState["len_"+dateState.dayType];$("#date_fatigue").style.width="100%"}else{dateState.remain=dateCount;if(dateState.remain-dateState["len_"+dateState.dayType]>=0){while(1){dateState.remain-=dateState["len_"+dateState.dayType];dateState.date+=1;dateState.week=Math.max(1,Math.ceil(dateState.date/7));dateState.day=dateSettingWeek[(dateSettingWeek.indexOf(dateState.day)+1)%7];dateState.dayType=dayTypeList[dateState.day];if(dateState.remain-dateState["len_"+dateState.dayType]<0){break}}}dateState.remain=dateState["len_"+dateState.dayType]-dateState.remain;$("#date_fatigue").style.width=((dateState.remain/dateState["len_"+dateState.dayType])*100).toString()+"%"}dateState.changed=0;break;case 0:if(dateState.remain>0){dateState.remain-=1}else{dateState.date+=1;if(dateState.date%100===0){tower+=1;if($("#pot_tradable").value==="notTradable"){$("#pot_open").value="개봉 ("+tower.toString()+")";$("#pot_open").disabled=""}}dateState.day=dateSettingWeek[(dateSettingWeek.indexOf(dateState.day)+1)%7];dateState.dayType=dayTypeList[dateState.day];dateState.remain=dateState["len_"+dateState.dayType]-1}dateState.week=Math.max(1,Math.ceil(dateState.date/7));break}$("#date_count").innerHTML=thousand(dateState.date);$("#date_summary_num").innerHTML=thousand(dateState.week)+"주차 "+dateState.day+"요일";$("#date_fatigue").style.width=((dateState.remain/dateState["len_"+dateState.dayType])*100).toString()+"%"}function dungeon_select(){if($("#dungeon").value===""){input[0]=0}else{input[0]=parseInt($("#dungeon").value)}$("#frame_top").style.background="url('./images/epic/background_"+input[0].toString()+".jpg')";for(var b=0;b<maxQuantity;b++){$("#item"+b.toString()).style.left=startList[input[0]][0].toString()+"px";$("#item"+b.toString()).style.top=startList[input[0]][1].toString()+"px";$("#item_name"+b.toString()).className="item_name";$("#item_name"+b.toString()).style.visibility="hidden";$("#description"+b.toString()).style.left="0px";$("#item_img"+b.toString()).style.visibility="hidden";$("#effect_appear"+b.toString()).style.visibility="hidden";$("#effect_land"+b.toString()).style.visibility="hidden";$("#effect_wait"+b.toString()).style.visibility="hidden";clearTimeout(autoLooting[b-1]);clearTimeout(autoEffect.appear[b-1]);clearTimeout(autoEffect.land[b-1]);clearTimeout(autoEffect.wait[b-1]);$("#item_img"+b.toString()).className="item_img"}zoneList=[];for(var b=jogakRange[input[0]][0][0];b<=jogakRange[input[0]][0][1];b++){for(var a=jogakRange[input[0]][1][0];a<=jogakRange[input[0]][1][1];a++){zoneList.push([b,a])}}for(var b=0;b<coopList[input[0]].length;b++){zoneList.push(coopList[input[0]][b])}$("#person_helper").innerHTML=helpList[input[0]];if(startList[input[0]][0]<100){$("#character_sprite").style.left=(startList[input[0]][0]-40)+"px";$("#character_sprite").className="right"}else{$("#character_sprite").style.left=(startList[input[0]][0]-140-25)+"px";$("#character_sprite").className="left"}$("#character_sprite").style.top=(startList[input[0]][1]-15)+"px";$("#character_sprite").classList.add("wait");if(playMode==="rpg"){var c="";$("#hellgate_level").style.left=(startList[input[0]][0]-125)+"px";$("#hellgate_level").style.top=(startList[input[0]][1]-70)+"px";if(input[0]===6){$("#hellgate_level").style.top=(startList[input[0]][1]-40)+"px"}c="[Lv.";for(var b=0;b<levelList[playMode][input[0]].length;b++){c+=levelList[playMode][input[0]][b];if(b+1<levelList[playMode][input[0]].length){c+=", "}}c+="]";$("#hellgate_level").innerHTML=c;$("#hellgate_item").style.left=(startList[input[0]][0]-125)+"px";$("#hellgate_item").style.top=(startList[input[0]][1]-55)+"px";if(input[0]===6){$("#hellgate_item").style.top=(startList[input[0]][1]-25)+"px"}c="[";for(var b=0;b<dropPartList[playMode][input[0]].length;b++){if(dropPartList[playMode][input[0]][b]!==""){c+=dropPartList[playMode][input[0]][b];if(b+1<dropPartList[playMode][input[0]].length){c+=", "}}}if(c[c.length-2]===","){c=c.slice(0,c.length-2)}c+="]";$("#hellgate_item").innerHTML=c;$("#hellgate_life").style.left=(startList[input[0]][0]-125)+"px";$("#hellgate_life").style.top=(startList[input[0]][1]-40)+"px";if(input[0]===6){$("#hellgate_life").style.top=(startList[input[0]][1]-10)+"px"}hellgate=lifeList[input[0]];$("#hellgate_life").innerHTML=thousand(lifeList[input[0]])}else{hellgate=1}if($("#option_bgm").checked===true){play($("#bgm_type").value)}}function setObjective(b){objective=[];objective.push($("#objective_list").value);switch(objective[0]){case"none":break;case"item":objective.push($("#objective_item_first").value);objective.push($("#objective_item_second").value);objective.push($("#objective_item_third").value);objective.push($("#objective_item_name").value);break;case"set":if(b==="run"){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var a=0;a<temp2;a++){if($("#set_row_"+a.toString()).getElementsByTagName("td")[0].innerHTML.indexOf($("#objective_set_name").value)!==-1){tr_set=$("#set_row_"+a.toString());break}}if(tr_set.getElementsByTagName("td")[5].innerHTML!==""){alert('＊경고 : 해당 세트는 이미 완성되었습니다.\n대상 : "'+$("#objective_set_name").value+'"');return false}}objective.push($("#objective_set_first").value);objective.push($("#objective_set_name").value);break;case"count":if(b==="run"){if($("#objective_count_text").value===""){alert("＊경고 : 실행 횟수를 입력하세요.");return false}else{if(!isNumber($("#objective_count_text").value)){alert("＊경고 : 실행 횟수는 숫자를 입력해야 합니다.");return false}else{if(parseInt($("#objective_count_text").value)<=0){alert("＊경고 : 실행 횟수는 0보다 커야 합니다.");return false}}}}objective.push(parseInt($("#objective_count_text").value));objective.push(count);break;case"cost":if(b==="run"){if($("#objective_cost_text").value===""){alert("＊경고 : 초대장 개수를 입력하세요.");return false}else{if(!isNumber($("#objective_cost_text").value)){alert("＊경고 : 초대장 개수는 숫자를 입력해야 합니다.");return false}else{if(parseInt($("#objective_cost_text").value)<=0){alert("＊경고 : 초대장 개수는 0보다 커야 합니다.");return false}else{if(parseInt($("#objective_cost_text").value)<costList[input[0]]){alert("＊경고 : 초대장 개수가 입장 조건("+costList[input[0]]+"장)보다 부족합니다.");return false}}}}}objective.push(parseInt($("#objective_cost_text").value));objective.push(count);break;case"fatigue":if(b==="run"){if($("#objective_fatigue_max").value===""){alert("＊경고 : 전체 피로도를 입력하세요.");return false}else{if($("#objective_fatigue_per").value===""){alert("＊경고 : 1회동 소모 피로도를 입력하세요.");return false}else{if(!isNumber($("#objective_fatigue_max").value)){alert("＊경고 : 전체 피로도는 숫자를 입력해야 합니다.");return false}else{if(!isNumber($("#objective_fatigue_per").value)){alert("＊경고 : 1회당 소모 피로도는 숫자를 입력해야 합니다.");return false}else{if(parseInt($("#objective_fatigue_max").value)<=0){alert("＊경고 : 전체 피로도는 0보다 커야 합니다.");return false}else{if(parseInt($("#objective_fatigue_per").value)<=0){alert("＊경고 : 1회동 소모 피로도는 0보다 커야 합니다.");return false}}}}}}}objective.push(parseInt($("#objective_fatigue_max").value));objective.push(parseInt($("#objective_fatigue_per").value));objective.push(count);break}if(b==="run"){return true}}function checkObjective(e){var g=[];if(e==="setting"){setObjective()}switch(objective[0]){case"item":if(objective[4]!==""){for(var c=0;c<itemList.length;c++){if(objective[4]===itemList[c]["name"]){g.push(itemList[c]);break}}$("#objective_state_item_name").innerHTML=g[0]["sort3"];$("#objective_state_item_quantity").innerHTML=g[0]["have"];$("#objective_state_item_jogak").innerHTML=g[0]["jogak"];if(g[0]["have"]===0&&g[0]["jogak"]<maxJogak){$("#objective_state_item_complete").classList.remove("true");$("#objective_state_item_complete").classList.add("false")}else{$("#objective_state_item_complete").classList.remove("false");$("#objective_state_item_complete").classList.add("true")}}if(g.length===0){$("#objective_state_item_name").innerHTML="";$("#objective_state_item_quantity").innerHTML="";$("#objective_state_item_jogak").innerHTML="";$("#objective_state_item_complete").classList.remove("true");$("#objective_state_item_complete").classList.remove("false")}break;case"set":if(objective[2]!==""){for(var c=0;c<itemList.length;c++){if(objective[2]===itemList[c]["set"]){g.push(itemList[c])}}for(var c=0;c<g.length;c++){$("#objective_state_set_"+(c+1).toString()+"_name").innerHTML=g[c]["sort3"];$("#objective_state_set_"+(c+1).toString()+"_quantity").innerHTML=g[c]["have"];$("#objective_state_set_"+(c+1).toString()+"_jogak").innerHTML=g[c]["jogak"];if(g[c]["have"]===0&&g[c]["jogak"]<maxJogak){$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("true");$("#objective_state_set_"+(c+1).toString()+"_complete").classList.add("false")}else{$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("false");$("#objective_state_set_"+(c+1).toString()+"_complete").classList.add("true")}}}for(var c=0;c<5;c++){if(c+1>g.length){$("#objective_state_set_"+(c+1).toString()+"_name").innerHTML="";$("#objective_state_set_"+(c+1).toString()+"_quantity").innerHTML="";$("#objective_state_set_"+(c+1).toString()+"_jogak").innerHTML="";$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("true");$("#objective_state_set_"+(c+1).toString()+"_complete").classList.remove("false")}}break}if(e!=="report"){return}var a=false;var d="";if(objective[0]==="none"){a=false;d=""}else{if(objective[0]==="item"){if(thisEpic.length>0||thisJogak.length>0){var b=[];for(var c=0;c<thisEpic.length;c++){b.push(thisEpic[c])}for(var c=0;c<thisJogak.length;c++){b.push(thisJogak[c])}for(var c=0;c<b.length;c++){if(objective[4]===b[c]["name"]){d=objective[4];a=true}else{if(objective[4]===""&&objective[3]===b[c]["sort3"]){d=b[c]["name"]+" (모든 "+objective[3]+" 아이템)";a=true}else{if(objective[4]===""&&objective[3]===""&&objective[2]===b[c]["sort2"]){d=b[c]["name"]+" (모든 "+objective[2]+" 아이템)";a=true}else{if(objective[4]===""&&objective[3]===""&&objective[2]===""&&objective[1]===b[c]["sort1"]){d=b[c]["name"]+" (모든 "+objective[1]+" 아이템)";a=true}else{if(objective[4]===""&&objective[3]===""&&objective[2]===""&&objective[1]===""){d=b[c]["name"]+" (모든 에픽 아이템 )";a=true}}}}}}}}else{if(objective[0]==="set"){if(objective[1]===""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var c=0;c<temp2;c++){var h=$("#set_row_"+c.toString());if(h.getElementsByTagName("td")[5].innerHTML!==""){var f=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);for(j=0;j<itemList.length;j++){if(itemList[j]["set"]===f&&itemList[j]["firstCount"]>=count){d=f+" (모든 세트)";a=true;break}}}}}else{if(objective[2]===""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var c=0;c<temp2;c++){var h=$("#set_row_"+c.toString());if(h.getElementsByTagName("td")[5].innerHTML!==""){if(h.getElementsByTagName("td")[1].innerHTML===objective[1]){var f=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);for(j=0;j<itemList.length;j++){if(itemList[j]["set"]===f&&itemList[j]["firstCount"]===count){d=f+" (모든 "+objective[1]+" 아이템)";a=true;break}}}}}}else{temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var c=0;c<temp2;c++){if($("#set_row_"+c.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(objective[2])!==-1){h=$("#set_row_"+c.toString());break}}if(h.getElementsByTagName("td")[5].innerHTML!==""){d=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);a=true}}}}else{if(objective[0]==="count"){if(objective[2]+objective[1]<=count){d=objective[1].toString()+"회 실행";a=true}}else{if(objective[0]==="cost"){if(objective[2]+Math.floor(objective[1]/costList[input[0]])<=count){d=objective[1].toString()+"장 중 "+(Math.floor(objective[1]/costList[input[0]])*costList[input[0]]).toString()+"장 사용 				(총 "+Math.floor(objective[1]/costList[input[0]]).toString()+"회 실행)";a=true}}else{if(objective[0]==="fatigue"){if(objective[3]+Math.ceil(objective[1]/objective[2])<=count){d=Math.ceil(objective[1]/objective[2]).toString()+"회 실행 (전체 피로도 : "+objective[1].toString()+")";a=true}}}}}}}if(e==="report"){return{out:a,showing:d}}}function getEpicList(){currentList_goyu=[];for(var a=0;a<goyuList.length;a++){if(goyuList[a]["goyu"]===areaList[input[0]]){currentList_goyu.push(goyuList[a])}}currentList=[];for(var a=0;a<itemList.length;a++){if(levelList[playMode][input[0]].indexOf(itemList[a]["level"])!==-1&&itemList[a]["name"]!==""&&itemList[a]["goyu"]===""){currentList.push(itemList[a])}}}function trigger(a,b){switch(b){case 0:count+=1;$("#round_count").innerHTML=thousand(count);cost[0]+=costList[input[0]];cost[1]+=costList[input[0]];$("#cost_invitation").innerHTML=thousand(cost[0]);$("#cost_real").innerHTML=thousand(cost[1]);$("#cost_gold").innerHTML=setWon(cost[0]*gold+cost[2]);$("#cost_gold_real").innerHTML=setWon(cost[1]*gold+cost[3]);switch(playMode){case"normal":setTimeout(function(){trigger(a,1)},playSpeed[playMode]);break;case"rpg":autoRunning=setTimeout(function(){trigger(a,1)},playSpeed[playMode]);break}break;default:hellgate=Math.max(0,hellgate-power);$("#hellgate_life").innerHTML=thousand(hellgate);dateCount+=1;setDate();if(hellgate>0){switch(playMode){case"normal":setTimeout(function(){trigger(a,1)},playSpeed[playMode]);break;case"rpg":autoRunning=setTimeout(function(){trigger(a,1)},playSpeed[playMode]);break}}else{if(runningState==="trigger"){runningState="simulate"}simulate(a)}break}}function simulate(f){dropCount=0;thisTime=[];for(var c=0;c<maxQuantity;c++){coordinate[c-1]=[0,0];$("#item"+c.toString()).style.msTransform="translate(0px,0px)";$("#item"+c.toString()).style.webkitTransform="translate(0px,0px)";$("#item"+c.toString()).style.transform="translate(0px,0px)";$("#description"+c.toString()).className="description";$("#item_name"+c.toString()).className="item_name";$("#item_name"+c.toString()).style.visibility="hidden";$("#description"+c.toString()).style.left="0px";$("#item_img"+c.toString()).style.visibility="hidden";$("#effect_appear"+c.toString()).style.visibility="hidden";$("#effect_land"+c.toString()).style.visibility="hidden";$("#effect_wait"+c.toString()).style.visibility="hidden";if(f!==3){clearTimeout(autoLooting[c-1]);clearTimeout(autoEffect.appear[c-1]);clearTimeout(autoEffect.land[c-1]);clearTimeout(autoEffect.wait[c-1]);$("#item_img"+c.toString()).className="item_img"}}input[1]=$("#difficulty").value;input[2]=rand(chanceList_num[0]);$("#round_difficulty").innerHTML=chanceList_name[0][input[2]];var l=[];for(var c=0;c<zoneList.length;c++){l[c]=zoneList[c]}var h=(jogakRange[input[0]][0][1]-jogakRange[input[0]][0][0]+1)*(jogakRange[input[0]][1][1]-jogakRange[input[0]][1][0]+1);var p=dropQuantityList[1].max();var m=[];for(var c=0;c<h;c++){m[c]=l[c]}var k=[];for(var c=h;c<l.length;c++){k[c-h]=l[c]}m=shuffle(m);k=shuffle(k);l=[];for(var c=0;c<p;c++){l.push(m[c])}for(var c=0;c<k.length;c++){l.push(k[c])}var n=dropQuantityList[1][input[1]];var d=dropQuantityList[0][input[2]];var a=dropQuantityList[2][input[1]][Math.floor(Math.random()*dropQuantityList[2][input[1]].length)];quantity=d+a+n;for(var c=0;c<n;c++){sortItem("조각",c,l)}for(var c=p;c<p+d;c++){sortItem("장비",c,l)}for(var c=p+d;c<p+d+a;c++){getItem("초대장",input[1],c,l)}thisEpic=[];thisJogak=[];for(var c=0;c<thisTime.length;c++){if(thisTime[c][2]==="에픽"||thisTime[c][2]==="고유에픽"){update("에픽",thisTime[c][3]);thisEpic.push(thisTime[c][3])}else{switch(thisTime[c][2]){case"마봉":break;case"코스모소울":case"지옥구슬":case"초대장":update(thisTime[c][2]);break;case"조각":update(thisTime[c][2],thisTime[c][3]);if(thisTime[c][3]["jogak"]===maxJogak){for(var b=0;b<thisJogak.length;b++){if(thisTime[c][3]["name"]===thisJogak[b]["name"]){continue}}thisJogak.push(thisTime[c][3])}break}}}if(thisEpic.length>0||thisJogak.length>0){try{if($("#option_sound").checked){sound_appear.pause();sound_appear.currentTime=0;sound_appear.play()}}catch(g){}if(thisEpic.length>0){var o="<span class='equip";for(var c=0;c<thisEpic.length;c++){o+=" "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()}o+="'><span class='run";for(var c=0;c<thisEpic.length;c++){o+=" "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()}o+="'>"+thousand(count.toString())+"회차 								<span class='cost'>(초대장 : "+thousand(cost[0])+" / 실질 : "+thousand(cost[1])+")</span>								<span class='difficulty_"+input[2].toString()+"'> &lt;"+chanceList_name[0][input[2]].toString()+"&gt;</span>							</span><br />";for(var c=0;c<thisEpic.length;c++){if(thisEpic[c]["sort1"]==="방어구"){if(thisEpic[c]["set"]!==""){o+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>									<span class='set'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort2"]+" / "+thisEpic[c]["level"]+"제]									 <span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}else{o+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>									<span class='epic'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort2"]+" / "+thisEpic[c]["level"]+"제]									 <span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}}else{if(thisEpic[c]["set"]!==""){o+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>								<span class='set'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort3"]+" / "+thisEpic[c]["level"]+"제] 								 <span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}else{o+="								<span class='get "+thisEpic[c]["sort1"]+" "+thisEpic[c]["sort2"]+" "+thisEpic[c]["sort3"]+" lv"+thisEpic[c]["level"].toString()+"'>								<span class='epic'>　"+thisEpic[c]["name"]+"</span> ["+thisEpic[c]["sort3"]+" / "+thisEpic[c]["level"]+"제] 								<span class='quantity'>(x"+thisEpic[c]["get"]+")</span>								</span><br />"}}}o+="</span>";if($("#record").style.display==="block"){content_text[0]+=o;$("#record").innerHTML+=o;$("#record").scrollTop=$("#record").scrollHeight}else{content_text[0]+=o}}}checkDrop(f)}function checkDrop(c){var a=false;if($("#option_gabriel").checked===true&&Math.random()<=gabrielSetting.chance){a=true}if(c===1){for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}if(a===true){onoff("gabriel");setGabriel()}else{onoff("drop");nextStep(1)}}else{if(c===2||c===3){var d=checkObjective("report");var b=d.out;var f=d.showing;if(b===true){var g="<span class='system'>====================&lt;탐색 종료&gt;====================";g+="<br/>※ 종료 조건 : "+$("#objective_list").options[$("#objective_list").selectedIndex].text+" － "+f;g+="<br/>================================================</span>";content_text[0]+=g;$("#record").innerHTML=content_text[0];gabrielSetting.alreadySatisfy=true;if($("#record").style.display==="block"){$("#record").scrollTop=$("#record").scrollHeight}runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode==="rpg"){hellgate=lifeList[input[0]];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}objective=[];for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}if(a===true){gabrielSetting.alreadySatisfy=true;onoff("gabriel");setGabriel()}else{onoff("drop");nextStep(c)}}else{if(runningState!==""){if(a===true){for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}gabrielSetting.replay=true;onoff("gabriel");setGabriel()}else{if(playMode==="rpg"){for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}}nextStep(c)}}else{for(var e=0;e<thisTime.length;e++){dropItem(thisTime[e])}if(a===true){onoff("gabriel");setGabriel()}else{onoff("drop");nextStep(c)}}}}}}function nextStep(b,e){if(b===1){runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode==="rpg"){hellgate=lifeList[input[0]];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}}else{if(b===2||b===3){var c=checkObjective("report");var a=c.out;var d=c.showing;if(a===true){if(gabrielSetting.alreadySatisfy===false){gabrielSetting.alreadySatisfy=true;var f="<span class='system'>====================&lt;탐색 종료&gt;====================";f+="<br/>※ 종료 조건 : "+$("#objective_list").options[$("#objective_list").selectedIndex].text+" － "+d;f+="<br/>================================================</span>";content_text[0]+=f;$("#record").innerHTML=content_text[0];if($("#record").style.display==="block"){$("#record").scrollTop=$("#record").scrollHeight}runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode==="rpg"){hellgate=lifeList[input[0]];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}objective=[]}onoff(2.5)}else{if(runningState!==""){if(playMode==="rpg"){hellgate=lifeList[input[0]];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}runningState="trigger";trigger(2,0)}else{runningState="";$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");if(playMode==="rpg"){hellgate=lifeList[input[0]];$("#hellgate_life").innerHTML=thousand(hellgate)}else{hellgate=1}}}}}}function setGabriel(d){if($("#gabriel_type").value==="manual"&&d!="settingOnly"){if($("#option_sound").checked===true){try{sound_appear.pause();sound_appear.currentTime=0}catch(k){}sound_appear.play()}}else{if($("#gabriel_type").value==="auto"&&gabrielSetting.get===null&&d!=="settingOnly"){onoff("gabriel_autoFirst");if($("#option_sound").checked===true){try{sound_appear.pause();sound_appear.currentTime=0}catch(k){}sound_appear.play()}}}if(d!=="settingOnly"){$("#character_sprite").classList.remove("attack");$("#character_sprite").classList.add("wait");gabrielSetting.trading=true;gabrielSetting.changable=gabrielSetting.maxChangable;$("#gabriel_change").value="재료 변경 ("+gabrielSetting.changable+"/"+gabrielSetting.maxChangable+")"}var h=["type","icon","name","jogak"];for(var g=0;g<h.length;g++){$("#gabriel_item_get_"+h[g]).innerHTML=""}$("#gabriel_item_get_icon").style.backgroundPosition="0px 0px";for(var g=1;g<=5;g++){for(var f=0;f<h.length;f++){$("#gabriel_item_give_"+g.toString()+"_"+h[f]).innerHTML=""}$("#gabriel_item_give_"+g.toString()+"_icon").style.backgroundPosition="0px 0px"}$("#gabriel_message_box").style.visibility="hidden";$("#gabriel_yes").disabled="";if(gabrielSetting.changable<=0){$("#gabriel_change").disabled="disabled"}else{$("#gabriel_change").disabled=""}if(gabrielSetting.get===null){$("#gabriel_message").innerHTML="에픽 조각을 받고 싶은 장비를<br/>에픽 도감에서 선택해주세요.";$("#gabriel_message_box").style.visibility="visible";$("#gabriel_yes").disabled="disabled";$("#gabriel_change").disabled="disabled";if(d!="settingOnly"){doGabriel("notSet")}return}else{$("#gabriel_item_get_type").innerHTML="<p>"+gabrielSetting.get["sort1"]+"</p>";$("#gabriel_item_get_icon").style.backgroundPosition=spritePosition(gabrielSetting.get["icon"],1);$("#gabriel_item_get_name").innerHTML="<p>"+gabrielSetting.get["name"]+"</p>";$("#gabriel_item_get_jogak").innerHTML="<p>"+gabrielSetting.get["jogak"]+" 조각 (+ 5)</p>"}var n=gabrielSetting.get["sort1"];var a=gabrielSetting.get["level"];var b=gabrielSetting.get["name"];var p=gabrielSetting.get["set"];var o=[];var c=[];for(var g=0;g<itemList.length;g++){if(itemList[g]["name"]!=b&&itemList[g]["sort1"]===n&&itemList[g]["level"]===a&&itemList[g]["jogak"]>=10){if(p!==""&&itemList[g]["set"]===p){o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);o.push(itemList[g]);c.push(itemList[g])}else{o.push(itemList[g]);c.push(itemList[g])}}}var m=[];for(var g=0;g<itemList.length;g++){if(itemList[g]["name"]!=b&&itemList[g]["sort1"]!=n&&itemList[g]["level"]===a&&itemList[g]["jogak"]>=10&&o.indexOf(itemList[g])<0){m.push(itemList[g])}}if(c.length<3||m.length<2){$("#gabriel_message").innerHTML="동일 레벨의 에픽 조각이<br/>부족하여 교환할 수 없습니다.";$("#gabriel_message_box").style.visibility="visible";$("#gabriel_yes").disabled="disabled";$("#gabriel_change").disabled="disabled";if(d!="settingOnly"){doGabriel("no")}return}else{o=shuffle(o);m=shuffle(m);var l=[];for(var g=0;g<o.length;g++){if(l.indexOf(o[g])<0){l.push(o[g])}if(l.length===3){break}}l.push(m[0]);l.push(m[1]);l=shuffle(l);gabrielSetting.give=l;for(var g=0;g<5;g++){$("#gabriel_item_give_"+(g+1).toString()+"_type").innerHTML="<p>"+gabrielSetting.give[g]["sort1"]+"</p>";$("#gabriel_item_give_"+(g+1).toString()+"_icon").style.backgroundPosition=spritePosition(gabrielSetting.give[g]["icon"],1);$("#gabriel_item_give_"+(g+1).toString()+"_name").innerHTML="<p>"+gabrielSetting.give[g]["name"]+"</p>";$("#gabriel_item_give_"+(g+1).toString()+"_jogak").innerHTML="<p>"+gabrielSetting.give[g]["jogak"]+" 조각 (-10)</p>"}if(d!="settingOnly"){doGabriel("yes")}}}function doGabriel(a){function c(){if($("#option_sound").checked===true){try{sfxList.hell_gabriel_no.pause();sfxList.hell_gabriel_no.currentTime=0}catch(d){}sfxList.hell_gabriel_no.play()}if(gabrielSetting.replay===true){$("#character_sprite").classList.remove("wait");$("#character_sprite").classList.add("attack");gabrielSetting.replay=false;gabrielSetting.trading=false;onoff(2);nextStep(3)}else{gabrielSetting.trading=false;onoff(0)}}function b(){if($("#option_sound").checked===true){try{sfxList.hell_gabriel_yes.pause();sfxList.hell_gabriel_yes.currentTime=0}catch(f){}sfxList.hell_gabriel_yes.play()}for(var d=0;d<gabrielSetting.give.length;d++){update("조각",gabrielSetting.give[d],-10)}update("조각",gabrielSetting.get,5);if(gabrielSetting.get["jogak"]-5<maxJogak&&gabrielSetting.get["jogak"]>=maxJogak){thisJogak.push(gabrielSetting.get)}if(gabrielSetting.replay===true){$("#character_sprite").classList.remove("wait");$("#character_sprite").classList.add("attack");gabrielSetting.replay=false;gabrielSetting.trading=false;onoff(2);nextStep(3)}else{gabrielSetting.trading=false;onoff(0)}}$("#gabriel_change").onclick=function(){gabrielSetting.changable-=1;$("#gabriel_change").value="재료 변경 ("+gabrielSetting.changable.toString()+"/"+gabrielSetting.maxChangable+")";setGabriel("settingOnly")};$("#gabriel_no").onclick=function(){c()};$("#gabriel_yes").onclick=function(){b()};if($("#gabriel_type").value==="auto"&&a!="notSet"){switch(a){case"no":c();break;case"yes":b();break}}}function sortItem(k,h,l){switch(k){case"장비":input[3]=chanceList_name[1][input[2]][input[1]][rand(chanceList_num[1][input[2]][input[1]])];if(input[3]!=="에픽"){getItem(k,input[3],h,l);return}break;case"조각":input[3]="에픽";break}switch(k){case"장비":var b=deepCopy(chanceList_name[2]);var e=deepCopy(chanceList_num[2]);if(input[0]===17){e[1]*=10;e[0]=1-e[1]}input[4]=b[rand(e)];if(input[4]==="고유에픽"){if(currentList_goyu.length>0){getItem(k,input[4],h,l);return}}break;case"조각":input[4]="일반에픽";break}var a=deepCopy(dropPartList[playMode][input[0]]);var c=deepCopy(chanceList_num[3]);var f=a.length;for(var g=f-1;g>=0;g--){if(a[g]===""){a.splice(g,1);c.splice(g,1)}}input[5]=a[rand(c)];switch(playMode){case"normal":currentList_level=[];for(var g=0;g<levelList[playMode][input[0]].length;g++){currentList_level.push(0)}for(var g=0;g<currentList.length;g++){for(var d=0;d<levelList[playMode][input[0]].length;d++){if((currentList[g]["sort1"]===input[5]||currentList[g]["sort2"]===input[5])&&currentList[g]["level"]===levelList[playMode][input[0]][d]){currentList_level[d]+=1}}}for(var g=0;g<chanceList_num[4].length;g++){if(chanceList_num[4][g][0].indexOf(input[0])!==-1){for(var d=0;d<currentList_level.length;d++){currentList_level[d]=currentList_level[d]*chanceList_num[4][g][1][d]}break}}input[6]=levelList[playMode][input[0]][rand(currentList_level)];break;case"rpg":input[6]=levelList[playMode][input[0]];break}getItem(k,input[3],h,l);return}function getItem(h,m,g,i){switch(h){case"장비":switch(m){case"마봉":var d=fieldList[Math.floor(Math.random()*fieldList.length)];if(d.split("_")[1]==="방어구"){var c=d.split("_")[2]+" "+d.split("_")[3]}else{var c=d.split("_")[3]}$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" rare";$("#item_name"+g.toString()).innerHTML="마법으로 봉인된 "+c;$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(d,1);$("#item_img"+g.toString()).style.width=spriteSize(d,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(d,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";thisTime.push([g,i,m]);break;case"코스모소울":var d="field_기타";var c="코스모 소울";$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" epic";$("#item_name"+g.toString()).innerHTML=c;$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(d,1);$("#item_img"+g.toString()).style.width=spriteSize(d,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(d,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";thisTime.push([g,i,m]);break;case"지옥구슬":var d="field_기타";var c=areaList[input[0]]+" 지옥구슬";$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" unique";$("#item_name"+g.toString()).innerHTML=c;$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(d,1);$("#item_img"+g.toString()).style.width=spriteSize(d,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(d,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";thisTime.push([g,i,m]);break;default:if(m==="고유에픽"){temp=currentList_goyu[Math.floor(Math.random()*currentList_goyu.length)]}else{if(m==="에픽"){var k=[];for(b=0;b<currentList.length;b++){if((currentList[b]["sort1"]===input[5]||currentList[b]["sort2"]===input[5]||currentList[b]["sort3"]===input[5])&&((playMode==="normal"&&currentList[b]["level"]===input[6])||(playMode==="rpg"&&input[6].indexOf(currentList[b]["level"])>=0))){k.push(currentList[b])}}temp=k[Math.floor(Math.random()*k.length)]}}$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" epic";$("#item_name"+g.toString()).innerHTML=temp.name;$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";var a="field_"+temp.sort1+"_"+temp.sort2+"_"+temp.sort3;$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+g.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";$("#effect_appear"+g.toString()).style.left=(-144).toString()+"px";$("#effect_appear"+g.toString()).style.top=(-235+25+($("#item_img"+g.toString()).offsetHeight/2)).toString()+"px";$("#effect_appear"+g.toString()).style.visibility="visible";thisTime.push([g,i,"에픽",temp])}break;case"조각":var k=[];for(var b=0;b<currentList.length;b++){if((currentList[b]["sort1"]===input[5]||currentList[b]["sort2"]===input[5]||currentList[b]["sort3"]===input[5])&&((playMode==="normal"&&currentList[b]["level"]===input[6])||(playMode==="rpg"&&input[6].indexOf(currentList[b]["level"])>=0))){k.push(currentList[b])}}temp=k[Math.floor(Math.random()*k.length)];$("#description"+g.toString()).className+=" jogak";$("#item_name"+g.toString()).className+=" jogak";$("#item_name"+g.toString()).innerHTML=temp.name+" 조각";$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";var a="field_에픽조각";$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+g.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";thisTime.push([g,i,h,temp]);break;case"완성":temp=m;$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" epic";$("#item_name"+g.toString()).innerHTML="(조각 완성) "+temp.name;$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";var a="field_"+temp.sort1+"_"+temp.sort2+"_"+temp.sort3;$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+g.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";$("#effect_appear"+g.toString()).style.left=(-144).toString()+"px";$("#effect_appear"+g.toString()).style.top=(-235+25+($("#item_img"+g.toString()).offsetHeight/2)).toString()+"px";$("#effect_appear"+g.toString()).style.visibility="visible";dropItem([g,i,"에픽",temp]);onoff("drop");dropCount=quantity-1;try{if($("#option_sound").checked){sound_appear.pause();sound_appear.currentTime=0;sound_appear.play()}}catch(f){}update("완성",temp);var l="<span class='equip "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();l+="'><span class='run "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();l+="'>조각 완성 ("+thousand(count)+"회차 									<span class='cost'> - 초대장 : "+thousand(cost[0])+" / 실질 : "+thousand(cost[1])+")</span>								</span><br />";if(temp.sort1==="방어구"){if(temp.set!==""){l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='set'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='epic'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}else{if(temp.set!==""){l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='set'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='epic'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								<span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}l+="</span>";content_text[0]+=l;if($("#record").style.display==="block"){$("#record").innerHTML=content_text[0]}break;case"항아리":temp=m;$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" epic";$("#item_name"+g.toString()).innerHTML="(항아리) "+temp.name;$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";var a="field_"+temp.sort1+"_"+temp.sort2+"_"+temp.sort3;$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+g.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";$("#effect_appear"+g.toString()).style.left=(-144).toString()+"px";$("#effect_appear"+g.toString()).style.top=(-235+25+($("#item_img"+g.toString()).offsetHeight/2)).toString()+"px";$("#effect_appear"+g.toString()).style.visibility="visible";dropItem([g,i,"에픽",temp]);onoff("drop");dropCount=quantity-1;try{if($("#option_sound").checked){sound_appear.pause();sound_appear.currentTime=0;sound_appear.play()}}catch(f){}update("항아리",temp);var l="<span class='equip "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();l+="'><span class='run "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString();l+="'>항아리 ("+thousand(count)+"회차 									<span class='cost'> - 초대장 : "+thousand(cost[0])+" / 실질 : "+thousand(cost[1])+")</span>								</span><br />";if(temp.sort1==="방어구"){if(temp.set!==""){l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='set'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>									<span class='epic'>　"+temp.name+"</span> ["+temp.sort2+" / "+temp.level+"제]									 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}else{if(temp.set!==""){l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='set'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								 <span class='quantity'>(x"+temp.get+")</span>								</span><br />"}else{l+="								<span class='get "+temp.sort1+" "+temp.sort2+" "+temp.sort3+" lv"+temp.level.toString()+"'>								<span class='epic'>　"+temp.name+"</span> ["+temp.sort3+" / "+temp.level+"제] 								<span class='quantity'>(x"+temp.get+")</span>								</span><br />"}}l+="</span>";content_text[0]+=l;if($("#record").style.display==="block"){$("#record").innerHTML=content_text[0]}break;case"초대장":$("#description"+g.toString()).className+=" normal";$("#item_name"+g.toString()).className+=" rare";$("#item_name"+g.toString()).innerHTML="지옥파티 초대장";$("#description"+g.toString()).style.left=(-$("#item_name"+g.toString()).offsetWidth/2).toString()+"px";var a="field_초대장";$("#item_img"+g.toString()).style.backgroundPosition=spritePosition(a,1);$("#item_img"+g.toString()).style.width=spriteSize(a,"width",1);$("#item_img"+g.toString()).style.left=(-$("#item_img"+g.toString()).offsetWidth/2).toString()+"px";$("#item_img"+g.toString()).style.height=spriteSize(a,"height",1);$("#item_name"+g.toString()).style.visibility="visible";$("#item_img"+g.toString()).style.visibility="visible";thisTime.push([g,i,h,temp]);break}}function dropItem(a){$("#item_img"+a[0].toString()).className+=" rotate";switch(a[2]){case"에픽":animation($("#effect_appear"+a[0].toString()),"appear",a[0],341,0,-4091,40,0);looting(a[2],a[0],a[1],1,1,1);break;default:looting(a[2],a[0],a[1],1,0,0);break}}function update(k,c,e){if(k==="코스모소울"){get[2]+=1;$("#result_soul_get").innerHTML=thousand(get[2]);if(!$("#option_soul").checked||get[3]<0){if(get[3]===-1){$("#result_soul_have").classList.remove("red")}if(get[3]===0){$("#result_button_soulDisassemble").disabled="";$("#result_button_soulDisassemble").value="해체"}get[3]+=1;$("#result_soul_have").innerHTML=thousand(get[3])}else{cost[1]-=cutList[0];$("#cost_real").innerHTML=thousand(cost[1]);$("#cost_gold_real").innerHTML=setWon(cost[1]*gold+cost[3])}}else{if(k==="지옥구슬"){get[4]+=1;$("#result_beed_get").innerHTML=thousand(get[4]);cost[1]-=cutList[1][input[0]];$("#cost_real").innerHTML=thousand(cost[1])}else{if(k==="초대장"){get[5]+=1;$("#result_cost_get").innerHTML=thousand(get[5]);cost[1]-=1;$("#cost_real").innerHTML=thousand(cost[1])}else{if(k==="에픽"||k==="완성"||k==="항아리"){num=0;for(var g=0;g<itemList.length;g++){if(itemList[g]["name"]===c.name){num=g;break}}get[0]+=1;$("#result_epic_get").innerHTML=thousand(get[0]);if(get[1]===0){$("#result_button_epicDisassemble").disabled="";$("#result_button_epicDisassemble").value="해체"}get[1]+=1;$("#result_epic_have").innerHTML=thousand(get[1]);itemList[num]["get"]+=1;itemList[num]["have"]+=1;if(itemList[num]["have"]===1){itemList[num]["firstCount"]=count;itemList[num]["firstInvite"]=cost[0];itemList[num]["firstReal"]=cost[1]}if(itemList[num]["have"]===1){collect+=1;var l=Math.floor((collect/itemList.length)*1000)/10;$("#inventory_check_collect").innerHTML=l.toString()}}else{if(k==="조각"){num=0;for(var g=0;g<itemList.length;g++){if(itemList[g]["name"]===c.name){num=g;break}}if(!e){e=1}itemList[num]["jogak"]+=e;if(itemList[num]["jogak"]-e<maxJogak&&itemList[num]["jogak"]>=maxJogak){$("#shift4").classList.add("ready");clearTimeout(autoEffect.jogak);animation($("#shift4_effect"),"appear","jogak",682,0,-8182,80,0)}}}}}}if(k==="에픽"||k==="완성"||k==="항아리"){var p=$("#inventory_row_"+num);p.getElementsByTagName("td")[4].innerHTML=itemList[num]["have"].toString();if(p.getElementsByTagName("td")[5].innerHTML===""){p.getElementsByTagName("td")[3].innerHTML="				<a href='javascript:void(0);' onclick='recycle("+num.toString()+",1);' >해체</a>"}if(p.getElementsByTagName("td")[5].innerHTML===""){var q="";q+=thousand(itemList[num]["firstCount"])+"회차 ";if(k==="에픽"){q+="(드랍)"}else{if(k==="완성"){q+="<span class='yellow'>(완성)</span>"}else{if(k==="항아리"){q+="<span class='set'>(항아리)</span>"}}}q+="				<br/><span class='cost'>(초대장 : "+thousand(itemList[num]["firstInvite"])+"				<br/>/ 실질 : "+thousand(itemList[num]["firstReal"])+")";p.getElementsByTagName("td")[5].innerHTML=q}if(p.className.indexOf("not_show")!==-1){if(c.set!==""){p.getElementsByTagName("td")[0].innerHTML="<span class='set'>"+p.getElementsByTagName("td")[0].innerHTML+"</span>"}else{p.getElementsByTagName("td")[0].innerHTML="<span class='epic'>"+p.getElementsByTagName("td")[0].innerHTML+"</span>"}}p.classList.remove("not_show");p.classList.add("show");if(itemList[num]["set"]!==""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var g=0;g<temp2;g++){if($("#set_row_"+g.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[num]["name"])!==-1){var h=$("#set_row_"+g.toString());break}}h.getElementsByTagName("td")[4].innerHTML=itemList[num]["have"].toString();if(h.getElementsByTagName("td")[5].innerHTML===""){h.getElementsByTagName("td")[3].innerHTML="					<a href='javascript:void(0);' onclick='recycle("+num.toString()+",1);' >해체</a>"}if(h.getElementsByTagName("td")[5].innerHTML===""){var q="";q+=thousand(itemList[num]["firstCount"])+"회차 ";q+="					<br/><span class='cost'>(초대장 : "+thousand(itemList[num]["firstInvite"])+"					<br/>/ 실질 : "+thousand(itemList[num]["firstReal"])+")";if(k==="에픽"){q+="(드랍)"}else{if(k==="완성"){q+="<span class='yellow'>(완성)</span>"}else{if(k==="항아리"){q+="<span class='set'>(항아리)</span>"}}}h.getElementsByTagName("td")[5].innerHTML=q}if(h.className.indexOf("not_show")!==-1){h.getElementsByTagName("td")[0].innerHTML="<span class='set'>"+h.getElementsByTagName("td")[0].innerHTML+"</span>"}h.classList.remove("not_show");h.classList.add("show");temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var g=0;g<temp2;g++){if($("#set_row_"+g.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[num]["set"])!==-1){var f=$("#set_row_"+g.toString());break}}var o=0;var n=0;for(var g=0;g<itemList.length;g++){if(itemList[g]["set"]===(f.getElementsByTagName("td")[0].innerText||f.getElementsByTagName("td")[0].textContent)){if(itemList[g]["have"]>0){o+=1}n+=1}}f.getElementsByTagName("td")[4].innerHTML=o.toString()+"/"+n.toString();var m=(f.getElementsByTagName("td")[0].innerText||f.getElementsByTagName("td")[0].textContent);if(o<n){f.getElementsByTagName("td")[0].innerHTML=m;f.getElementsByTagName("td")[5].innerHTML=""}else{f.getElementsByTagName("td")[0].innerHTML="<span class='epic'>"+m+"</span>";if(f.getElementsByTagName("td")[5].innerHTML===""){f.getElementsByTagName("td")[5].innerHTML="							"+thousand(count)+"회차							<span class='cost'><br/>(초대장 : "+thousand(cost[0])+"							<br/>/ 실질 : "+thousand(cost[1])+")"}}if(o>0){f.classList.remove("not_show");f.classList.add("show")}else{f.classList.remove("show");f.classList.add("not_show")}}}if(((k==="에픽"||k==="완성"||k==="항아리")&&c.goyu==="")||k==="조각"){var d=$("#craft_row_"+num);if((k==="에픽"||k==="완성"||k==="항아리")){d.getElementsByTagName("td")[3].innerHTML=itemList[num]["have"].toString()}d.getElementsByTagName("td")[4].innerHTML=thousand(itemList[num]["jogak"]);if(itemList[num]["jogak"]<maxJogak){d.getElementsByTagName("td")[4].classList.remove("ready")}else{d.classList.add("available");d.getElementsByTagName("td")[4].classList.add("ready")}if(itemList[num]["jogak"]>=maxJogak){d.getElementsByTagName("td")[5].className="col_6 button";d.getElementsByTagName("td")[5].innerHTML="제작";d.getElementsByTagName("td")[5].onclick=(function(a){return function(){make(a,1)}})(num)}if(k==="조각"){if(d.className.indexOf("not_show")!==-1){if(c.set!==""){d.getElementsByTagName("td")[0].innerHTML="<span class='set'>"+d.getElementsByTagName("td")[0].innerHTML+"</span>"}else{d.getElementsByTagName("td")[0].innerHTML="<span class='epic'>"+d.getElementsByTagName("td")[0].innerHTML+"</span>"}}d.classList.remove("not_show");d.classList.add("show")}}checkObjective("update");if(k==="에픽"||k==="완성"||k==="항아리"){if(myCharacter!==""&&(c["class"]===""||c["class"].indexOf(myCharacter)>=0)){setEquip()}}}function recycle(g,f,d){var c=itemList[g]["sort3"];if(itemList[g]["sort1"]==="무기"){c=itemList[g]["sort1"]}if(itemList[g]["have"]===1&&wearingList[c]===itemList[g]){if(d!=="skip"){alert("※ 경고 : "+itemList[g]["name"]+"을(를) 해체하려면 장비 장착 메뉴에서 해당 장비를 장착해제 하세요.")}return}if(!$("#inventory_check_confirm").checked||!$("#set_check_confirm").checked){if(!confirm("'"+itemList[g]["name"]+"' 을(를) "+f.toString()+"개 해체하시겠습니까?\n(보유 수량 : "+itemList[g]["have"].toString()+")")){return}}itemList[g]["have"]-=f;get[1]-=f;$("#result_epic_have").innerHTML=thousand(get[1]);if(get[1]===0){$("#result_button_epicDisassemble").disabled="disabled";$("#result_button_epicDisassemble").value="없음"}var h=$("#inventory_row_"+g);h.getElementsByTagName("td")[4].innerHTML=itemList[g]["have"].toString();if(itemList[g]["set"]!==""){temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var e=0;e<temp2;e++){if($("#set_row_"+e.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[g]["name"])!==-1){tr2=$("#set_row_"+e.toString());break}}tr2.getElementsByTagName("td")[4].innerHTML=itemList[g]["have"].toString()}if(!$("#option_soul").checked){var n=disCount("코스모소울",itemList[g]["level"]);if(get[3]<=0&&get[3]+n>0){$("#result_soul_have").classList.remove("red");$("#result_button_soulDisassemble").disabled="";$("#result_button_soulDisassemble").value="해체"}get[3]+=n;$("#result_soul_have").innerHTML=thousand(get[3])}else{cost[1]-=disCount("초대장",itemList[g]["level"])*f;$("#cost_real").innerHTML=thousand(cost[1]);$("#cost_gold_real").innerHTML=setWon(cost[1]*gold+cost[3])}if(itemList[g]["have"]===0){itemList[g]["firstCount"]=0;itemList[g]["firstInvite"]=0;itemList[g]["firstReal"]=0;itemList[g]["enchant"]=0;collect-=1;var k=Math.floor((collect/itemList.length)*1000)/10;$("#inventory_check_collect").innerHTML=k.toString();h.getElementsByTagName("td")[3].innerHTML="없음";h.getElementsByTagName("td")[5].innerHTML="";h.getElementsByTagName("td")[0].innerHTML=(h.getElementsByTagName("td")[0].innerText||h.getElementsByTagName("td")[0].textContent);h.classList.remove("show");h.classList.add("not_show");if(itemList[g]["set"]!==""){tr2.getElementsByTagName("td")[3].innerHTML="없음";tr2.getElementsByTagName("td")[5].innerHTML="";tr2.getElementsByTagName("td")[0].innerHTML=(tr2.getElementsByTagName("td")[0].innerText||tr2.getElementsByTagName("td")[0].textContent);tr2.classList.remove("show");tr2.classList.add("not_show");temp2=$("#set_table").getElementsByTagName("tbody")[0].getElementsByTagName("tr").length;for(var e=0;e<temp2;e++){if($("#set_row_"+e.toString()).getElementsByTagName("td")[0].innerHTML.indexOf(itemList[g]["set"])!==-1){tr_set=$("#set_row_"+e.toString());break}}var o=0;var m=0;for(var e=0;e<itemList.length;e++){if(itemList[e]["set"]===(tr_set.getElementsByTagName("td")[0].innerText||tr_set.getElementsByTagName("td")[0].textContent)){if(itemList[e]["have"]>0){o+=1}m+=1}}tr_set.getElementsByTagName("td")[4].innerHTML=o.toString()+"/"+m.toString();var l=(tr_set.getElementsByTagName("td")[0].innerText||tr_set.getElementsByTagName("td")[0].textContent);if(o<m){tr_set.getElementsByTagName("td")[0].innerHTML=l;tr_set.getElementsByTagName("td")[5].innerHTML=""}else{tr_set.getElementsByTagName("td")[0].innerHTML="<span class='epic'>"+l+"</span>";tr_set.getElementsByTagName("td")[5].innerHTML="						"+thousand(count)+"회차						<span class='cost'><br/>(초대장 : "+thousand(cost[0])+"						<br/>/ 실질 : "+thousand(cost[1])+")"}if(o>0){tr_set.classList.remove("not_show");tr_set.classList.add("show")}else{tr_set.classList.remove("show");tr_set.classList.add("not_show")}}}checkObjective("update")}function make(b,e){if(runningState!==""){alert("※ 경고 : 탐색 중에는 아이템 제작을 할 수 없습니다.");return}if(!confirm("'"+itemList[b]["name"]+"' 을(를) "+e.toString()+"개 제작하시겠습니까?\n(코스모소울 "+soulCount(itemList[b]["level"])+"개가 무조건 소모됩니다.)\n(코스모소울 수량이 음수가 되면, 0이 될 떄 까지 실질 초대장 소모량이 감소하지 않습니다.)")){return}var d=$("#craft_row_"+b);get[3]-=soulCount(itemList[b]["level"]);$("#result_soul_have").innerHTML=thousand(get[3]);if(get[3]<=0){$("#result_button_soulDisassemble").disabled="disabled";$("#result_button_soulDisassemble").value="없음"}if(get[3]<0){$("#result_soul_have").classList.add("red")}itemList[b]["jogak"]-=maxJogak;d.getElementsByTagName("td")[4].innerHTML=thousand(itemList[b]["jogak"]);if(itemList[b]["jogak"]<maxJogak){d.getElementsByTagName("td")[4].classList.remove("ready")}else{d.getElementsByTagName("td")[4].classList.add("ready")}if(itemList[b]["jogak"]===0){d.classList.remove("show");d.classList.add("not_show")}if(itemList[b]["jogak"]<maxJogak){d.classList.remove("available");d.getElementsByTagName("td")[5].className="col_6";d.getElementsByTagName("td")[5].innerHTML="불가";d.getElementsByTagName("td")[5].onclick=""}shift("");for(var c=0;c<maxQuantity;c++){coordinate[c-1]=[0,0];$("#item"+c.toString()).style.msTransform="translate(0px,0px)";$("#item"+c.toString()).style.webkitTransform="translate(0px,0px)";$("#item"+c.toString()).style.transform="translate(0px,0px)";$("#description"+c.toString()).className="description";$("#item_name"+c.toString()).className="item_name";$("#item_name"+c.toString()).style.visibility="hidden";$("#description"+c.toString()).style.left="0px";$("#item_img"+c.toString()).style.visibility="hidden";$("#effect_appear"+c.toString()).style.visibility="hidden";$("#effect_land"+c.toString()).style.visibility="hidden";$("#effect_wait"+c.toString()).style.visibility="hidden";clearTimeout(autoLooting[c-1]);clearTimeout(autoEffect.appear[c-1]);clearTimeout(autoEffect.land[c-1]);clearTimeout(autoEffect.wait[c-1]);$("#item_img"+c.toString()).className="item_img"}var a=Math.floor(Math.random()*coopList[input[0]].length);var f=coopList[input[0]];getItem("완성",itemList[b],a,f)}function looting(h,g,i,c,l,m,b,k,d){if(c===1){var b=i[g][0];var k=i[g][1];var d=5}if(c<12){coordinate[g-1][0]+=b;coordinate[g-1][1]-=k;var a=coordinate[g-1][0].toString()+"px,"+coordinate[g-1][1].toString()+"px";$("#item"+g.toString()).style.msTransform="translate("+a+") rotateY(0deg)";$("#item"+g.toString()).style.webkitTransform="translate("+a+") rotateY(0deg)";$("#item"+g.toString()).style.transform="translate("+a+") rotateY(0deg)";c+=1;k-=d;autoLooting[g-1]=setTimeout(function(){looting(h,g,i,c,l,m,b,k,d)},50)}else{if(l===1){try{if($("#option_sound").checked){sound_land.pause();sound_land.currentTime=0;sound_land.play()}}catch(f){}}$("#item_img"+g.toString()).className="item_img shadow";dropCount+=1;if(dropCount===quantity){if(gabrielSetting.trading===false&&runningState===""){onoff(0)}}if(m===1){$("#effect_land"+g.toString()).style.left=(-302).toString()+"px";$("#effect_land"+g.toString()).style.top=(-161+25+($("#item_img"+g.toString()).offsetHeight/2)).toString()+"px";$("#effect_land"+g.toString()).style.visibility="visible";animation($("#effect_land"+g.toString()),"land",g,604,0,-4227,150,0);$("#effect_wait"+g.toString()).style.left=(-99).toString()+"px";$("#effect_wait"+g.toString()).style.top=(-98+25+($("#item_img"+g.toString()).offsetHeight/2)).toString()+"px";$("#effect_wait"+g.toString()).style.visibility="visible";animation($("#effect_wait"+g.toString()),"wait",g,188,0,-2255,100,1)}}}function animation(h,e,c,b,d,a,g,f){switch(c){case"jogak":if(d-b>=a){h.style.display="block";h.style.backgroundPosition=(d-b).toString()+"px 0px";autoEffect.jogak=setTimeout(function(){animation(h,e,c,b,d-b,a,g,f)},g)}else{h.style.display="none"}break;default:if(d-b>=a){h.style.backgroundPosition=(d-b).toString()+"px 0px";autoEffect[e][c-1]=setTimeout(function(){animation(h,e,c,b,d-b,a,g,f)},g)}else{if(f===1){h.style.backgroundPosition="0px 0px";autoEffect[e][c-1]=setTimeout(function(){animation(h,e,c,b,0,a,g,f)},g)}else{h.style.visibility="hidden"}}}}function setEquip(e,a,d){if(!e){for(var b=0;b<partList.length;b++){clearSelect($("#list_"+partList[b]+"_select"));var c=document.createElement("option");c.value="";c.innerHTML="Lv.60 | 마법으로 봉인된 모험가 "+partList[b];$("#list_"+partList[b]+"_select").add(c)}for(var b=0;b<itemList.length;b++){if((itemList[b]["class"]===""||itemList[b]["class"].indexOf(myCharacter)>=0)&&itemList[b]["have"]>0){var c=document.createElement("option");c.value=itemList[b]["name"];c.innerHTML="Lv."+itemList[b]["level"]+" | "+itemList[b]["name"];if(itemList[b]["sort1"]==="무기"){$("#list_"+itemList[b]["sort1"]+"_select").add(c)}else{$("#list_"+itemList[b]["sort3"]+"_select").add(c)}}}for(var b=0;b<partList.length;b++){(function(g){if(wearingList[partList[g]]!==null){for(var f=0;f<$("#list_"+partList[g]+"_select").options.length;f++){if($("#list_"+partList[g]+"_select").options[f].value===wearingList[partList[g]]["name"]){$("#list_"+partList[g]+"_select").selectedIndex=f;break}}}$("#list_"+partList[g]+"_select").onchange=function(){setEquip(partList[g],$("#list_"+partList[g]+"_select").value)}})(b)}}else{if(a===""){wearingList[e]=null;$("#list_"+e+"_icon").style.backgroundPosition="0px 0px";$("#list_"+e+"_enchant").innerHTML="+0";$("#list_"+e+"_set").innerHTML="";$("#state_"+e+"_icon").style.backgroundPosition="0px 0px";$("#state_"+e+"_enchant").innerHTML="+0";if(!d){if($("#option_sound").checked===true){sfxList.wearing.play()}}setPower()}else{for(var b=0;b<itemList.length;b++){if(itemList[b]["name"]===a){wearingList[e]=itemList[b];break}}$("#list_"+e+"_icon").style.backgroundPosition=spritePosition(wearingList[e]["icon"],1);$("#list_"+e+"_enchant").innerHTML="+"+wearingList[e]["enchant"];$("#list_"+e+"_set").innerHTML=wearingList[e]["set"];$("#state_"+e+"_icon").style.backgroundPosition=spritePosition(wearingList[e]["icon"],1);$("#state_"+e+"_enchant").innerHTML="+"+wearingList[e]["enchant"];if(!d){if($("#option_sound").checked===true){sfxList.wearing.play()}}setPower()}}}function calcPower(l){if(typeof(l)!="object"){var d=l;var k=0;if(d==="무기"){k=pplList.lv0*3}else{if(d==="보조장비"||d==="마법석"){k=pplList.lv0*2}else{k=pplList.lv0}}return{power:k,setted:0}}var e=0;var c="";if(l.sort1==="무기"){c="무기"}else{c=l.sort3}var b="lv"+l.level.toString();switch(c){case"무기":e+=pplList[b]*3;break;case"보조장비":e+=pplList[b]*2;break;case"마법석":e+=pplList[b]*2;break;default:e+=pplList[b];break}var h=l.set;var m=0;var a=[0,0];for(var f=0;f<partList.length;f++){if(wearingList[partList[f]]!==null&&wearingList[partList[f]]["set"]===h){a[0]+=1}}for(var f=0;f<itemList.length;f++){if(itemList[f]["set"]===h){a[1]+=1}}if(a[0]===a[1]){e*=1.5;m=1}var g=l.enchant;for(var f=0;f<=g;f++){if(f>0&&f<=5){e+=eplList[b][0]}else{if(f>5&&f<=12){e+=eplList[b][1]}else{if(f>12&&f<=15){e+=eplList[b][2]}}}if(f>15&&f<=20){e+=eplList[b][3]}}return{power:e,set:m}}function setPower(){if(playMode==="rpg"){var b=0;var a={};for(var c=0;c<partList.length;c++){if(wearingList[partList[c]]===null){a=calcPower(partList[c]);b+=a.power}else{a=calcPower(wearingList[partList[c]]);b+=a.power}$("#list_"+partList[c]+"_power").innerHTML="전투력 : "+thousand(a.power);if(a.set===1){$("#list_"+partList[c]+"_type").classList.add("set")}else{$("#list_"+partList[c]+"_type").classList.remove("set")}}power=b;$("#character_power").innerHTML=thousand(power)}}function doEnchant(f,a,c){switch(c){case 0:enchantList.enchanting=1;for(var b=1;b<=5;b++){$("#shift"+b.toString()).disabled="disabled"}$("#shift_chance").disabled="disabled";for(var b=0;b<partList.length;b++){(function(e){$("#list_"+partList[e]+"_enchant_run").disabled="disabled"})(b)}$("#enchant_icon").className="";$("#enchant_icon").style.backgroundPosition=spritePosition(f.icon,1);$("#enchant_text").innerHTML="강화 중...";$("#enchant_text").className="enchanting";if($("#option_sound").checked===true){try{sfxList.enchant_success.pause();sfxList.enchant_success.currentTime=0;sfxList.enchant_fail.pause();sfxList.enchant_fail.currentTime=0;sfxList.enchant_zero.pause();sfxList.enchant_zero.currentTime=0}catch(d){}sfxList.enchant_progress.play()}$("#enchant_progress_bar").style.width=($("#enchant_progress_bar").offsetWidth+5).toString()+"px";setTimeout(function(){doEnchant(f,a,1)},16);break;case 1:if($("#enchant_progress_bar").offsetWidth+5<$("#enchant_progress").offsetWidth){$("#enchant_progress_bar").style.width=($("#enchant_progress_bar").offsetWidth+5).toString()+"px";setTimeout(function(){doEnchant(f,a,1)},16)}else{endEnchant(f,a)}break}}function endEnchant(h,b){var l=h.name;var f=h.icon;var d=h.enchant;var a=enchantList.cost[d];var k=enchantList.chance[d];cost[2]+=a;cost[3]+=a;$("#cost_gold").innerHTML=setWon(cost[0]*gold+cost[2]);$("#cost_gold_real").innerHTML=setWon(cost[1]*gold+cost[3]);var m=0;if(Math.random()<=k){m=1}else{m=0}switch(m){case 1:if($("#option_sound").checked===true){try{sfxList.enchant_progress.pause();sfxList.enchant_progress.currentTime=0}catch(g){}sfxList.enchant_success.play()}$("#enchant_text").className="";$("#enchant_text").innerHTML="+"+(h.enchant+1).toString()+"단계 강화 <span class='set'>성공!</span> (+"+h.enchant.toString()+" -> +"+(h.enchant+1).toString()+")";$("#enchant_progress_bar").style.width="0px";h.enchant+=1;setEquip(b,h.name,"noSound");break;case 0:if($("#option_sound").checked===true){try{sfxList.enchant_progress.pause();sfxList.enchant_progress.currentTime=0}catch(g){}if(h.enchant<10){sfxList.enchant_fail.play()}else{sfxList.enchant_zero.play()}}$("#enchant_text").className="";$("#enchant_text").innerHTML="+"+(h.enchant+1).toString()+"단계 강화 <span class='red'>실패!</span> (+"+h.enchant.toString()+" -> +"+(h.enchant+enchantList.drop[h.enchant]).toString()+")";$("#enchant_progress_bar").style.width="0px";h.enchant+=enchantList.drop[h.enchant];setEquip(b,h.name,"noSound");break}enchantList.enchanting=0;for(var c=1;c<=5;c++){(function(e){$("#shift"+e.toString()).disabled=""})(c)}if(playMode==="normal"){$("#shift_chance").disabled=""}for(var c=0;c<partList.length;c++){(function(e){$("#list_"+partList[e]+"_enchant_run").disabled=""})(c)}}function setPotOpen(a){switch(a){case"tradable":$("#pot_type").disabled="";$("#pot_tradable").disabled="";$("#pot_open").className="";$("#pot_open").value="개봉 (∞)";$("#pot_open").disabled="";break;case"notTradable":$("#pot_type").disabled="";$("#pot_tradable").disabled="";$("#pot_open").className="";$("#pot_open").value="개봉 ("+tower.toString()+")";if(tower>0){$("#pot_open").disabled=""}else{$("#pot_open").disabled="disabled"}break;case"cancel":$("#pot_type").disabled="disabled";$("#pot_tradable").disabled="disabled";$("#pot_open").className="cancel";$("#pot_open").value="개봉 취소";break}}function openPot(o,b,c){switch(c){case 0:$("#popup_pot").style.display="block";onoff("pot");var q="";if(b==="tradable"){q="교환 가능"}else{q="교환 불가"}$("#popup_pot_message").innerHTML="영웅의 "+o+" 항아리 ("+q+") : "+setWon(potList.cost[b])+" Gold";if($("#option_sound").checked){sfxList.pot_opening.play()}$("#popup_pot_progress_bar").style.width=($("#popup_pot_progress_bar").offsetWidth+3).toString()+"px";setTimeout(function(){openPot(o,b,1)},16);break;case 1:if(potList.opening===0){$("#popup_pot_progress_bar").style.width="0px";onoff(0);$("#popup_pot").style.display="none";try{sfxList.pot_opening.pause();sfxList.pot_opening.currentTime=0}catch(m){}setPotOpen($("#pot_tradable").value);return}if($("#popup_pot_progress_bar").offsetWidth+3<$("#popup_pot_progress").offsetWidth){$("#popup_pot_progress_bar").style.width=($("#popup_pot_progress_bar").offsetWidth+3).toString()+"px";setTimeout(function(){openPot(o,b,1)},16)}else{openPot(o,b,2)}break;case 2:cost[2]+=potList.cost[b];cost[3]+=potList.cost[b];$("#cost_gold").innerHTML=setWon(cost[0]*gold+cost[2]);$("#cost_gold_real").innerHTML=setWon(cost[1]*gold+cost[3]);if(b==="notTradable"){tower-=1}var h=[];var d=[];var r=[];switch(o){case"무기":for(var g=0;g<itemList.length;g++){if(itemList[g]["sort1"]==="무기"&&itemList[g]["class"].indexOf(myCharacter)>=0&&itemList[g]["goyu"]===""){h.push(itemList[g]);if(d.indexOf(itemList[g]["level"])<0){d.push(itemList[g]["level"]);r[d.indexOf(itemList[g]["level"])]=0}r[d.indexOf(itemList[g]["level"])]+=1}}break;default:for(var g=0;g<itemList.length;g++){if(itemList[g]["sort3"]===o&&itemList[g]["goyu"]===""){h.push(itemList[g]);if(d.indexOf(itemList[g]["level"])<0){d.push(itemList[g]["level"]);r[d.indexOf(itemList[g]["level"])]=0}r[d.indexOf(itemList[g]["level"])]+=1}}break}for(var g=0;g<d.length;g++){for(var f=0;f<potList[o]["name"].length;f++){if(potList[o]["name"][f].indexOf(d[g])>=0){r[g]*=potList[o]["num"][f]}}}var a=d[rand(r)];var n=[];for(var g=0;g<h.length;g++){if(h[g]["level"]===a){n.push(h[g])}}var l=n[Math.floor(Math.random()*n.length)];potList.opening=0;$("#popup_pot_progress_bar").style.width="0px";onoff(0);$("#popup_pot").style.display="none";try{sfxList.pot_opening.pause();sfxList.pot_opening.currentTime=0}catch(m){}setPotOpen($("#pot_tradable").value);for(var g=0;g<maxQuantity;g++){coordinate[g-1]=[0,0];$("#item"+g.toString()).style.msTransform="translate(0px,0px)";$("#item"+g.toString()).style.webkitTransform="translate(0px,0px)";$("#item"+g.toString()).style.transform="translate(0px,0px)";$("#description"+g.toString()).className="description";$("#item_name"+g.toString()).className="item_name";$("#item_name"+g.toString()).style.visibility="hidden";$("#description"+g.toString()).style.left="0px";$("#item_img"+g.toString()).style.visibility="hidden";$("#effect_appear"+g.toString()).style.visibility="hidden";$("#effect_land"+g.toString()).style.visibility="hidden";$("#effect_wait"+g.toString()).style.visibility="hidden";clearTimeout(autoLooting[g-1]);clearTimeout(autoEffect.appear[g-1]);clearTimeout(autoEffect.land[g-1]);clearTimeout(autoEffect.wait[g-1]);$("#item_img"+g.toString()).className="item_img"}var p=Math.floor(Math.random()*coopList[input[0]].length);var k=coopList[input[0]];getItem("항아리",l,p,k);break}}function play(a){if(bgm!=="none"){switch(bgm){case"hell":bgmList.hell.currentTime=0;bgmList.hell.pause();break;default:bgmList[bgm.toString()].currentTime=0;bgmList[bgm.toString()].pause();break}}if($("#option_bgm").checked===false){bgm="none"}else{switch(a){case"dungeon":bgmList[input[0].toString()].play();bgm=input[0];break;case"hell":bgmList.hell.play();bgm="hell";break}}}function onoff(a){switch(a){case 0:$("#start1").disabled="";$("#start2").disabled="";$("#start1").value="1회 실행";$("#start2").value="탐색 실시";$("#dungeon").disabled="";if(playMode!=="rpg"){$("#difficulty").disabled=""}$("#channel").disabled="";$("#objective_list").disabled="";$("#objective_item_first").disabled="";if($("#objective_item_first").value!==""){$("#objective_item_second").disabled=""}if($("#objective_item_second").value!==""){$("#objective_item_third").disabled=""}if($("#objective_item_third").value!==""){$("#objective_item_name").disabled=""}$("#objective_set_first").disabled="";if($("#objective_set_first").value!==""){$("#objective_set_name").disabled=""}$("#objective_count_text").disabled="";$("#objective_cost_text").disabled="";$("#objective_fatigue_max").disabled="";$("#objective_fatigue_per").disabled="";$("#reset").disabled="";$("#popup_gabriel").style.display="none";break;case 1:$("#start1").disabled="";$("#start2").disabled="disabled";$("#start1").value="실행 중지";$("#start2").value="탐색 실시";$("#dungeon").disabled="disabled";$("#difficulty").disabled="disabled";$("#channel").disabled="disabled";$("#objective_list").disabled="disabled";$("#objective_item_first").disabled="disabled";$("#objective_item_second").disabled="disabled";$("#objective_item_third").disabled="disabled";$("#objective_item_name").disabled="disabled";$("#objective_set_first").disabled="disabled";$("#objective_set_name").disabled="disabled";$("#objective_count_text").disabled="disabled";$("#objective_cost_text").disabled="disabled";$("#objective_fatigue_max").disabled="disabled";$("#objective_fatigue_per").disabled="disabled";$("#reset").disabled="disabled";$("#popup_gabriel").style.display="none";break;case 2:$("#start1").disabled="disabled";$("#start2").disabled="";$("#start1").value="1회 실행";$("#start2").value="탐색 중지";$("#dungeon").disabled="disabled";$("#difficulty").disabled="disabled";$("#channel").disabled="disabled";$("#objective_list").disabled="disabled";$("#objective_item_first").disabled="disabled";$("#objective_item_second").disabled="disabled";$("#objective_item_third").disabled="disabled";$("#objective_item_name").disabled="disabled";$("#objective_set_first").disabled="disabled";$("#objective_set_name").disabled="disabled";$("#objective_count_text").disabled="disabled";$("#objective_cost_text").disabled="disabled";$("#objective_fatigue_max").disabled="disabled";$("#objective_fatigue_per").disabled="disabled";$("#reset").disabled="disabled";$("#popup_gabriel").style.display="none";break;case"gabriel":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="조각 교환 중";$("#start2").value="조각 교환 중";if($("#gabriel_type").value==="manual"){$("#popup_gabriel").style.display="block"}break;case"gabriel_autoFirst":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="조각 교환 중";$("#start2").value="조각 교환 중";$("#popup_gabriel").style.display="block";break;case"drop":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="확인 중";$("#start2").value="확인 중";$("#popup_gabriel").style.display="none";break;case"pot":$("#start1").disabled="disabled";$("#start2").disabled="disabled";$("#start1").value="항아리 개봉";$("#start2").value="항아리 개봉";$("#popup_gabriel").style.display="none";break}}function shift(b){var a=0;if(b==="record"){a=1;right_display="record";$("#popup_title").className="title_record";$("#popup_title").innerHTML="획득 기록";$("#record_filter").style.display="block";$("#record").style.display="block";$("#record_check").style.display="block";$("#shift1").classList.add("selected");$("#shift1").value="창 닫기";if($("#record").innerHTML!==content_text[0]){$("#record").innerHTML=content_text[0]}$("#record").scrollTop=$("#record").scrollHeight}else{$("#record_filter").style.display="none";$("#record").style.display="none";$("#record_check").style.display="none";$("#shift1").classList.remove("selected");$("#shift1").value="획득 기록"}if(b==="inventory"){a=1;right_display="inventory";$("#popup_title").className="title_inventory";$("#popup_title").innerHTML="인벤토리";$("#inventory_filter").style.display="block";$("#inventory").style.display="block";$("#inventory_check").style.display="block";$("#shift2").classList.add("selected");$("#shift2").value="창 닫기"}else{$("#inventory_filter").style.display="none";$("#inventory").style.display="none";$("#inventory_check").style.display="none";$("#shift2").classList.remove("selected");$("#shift2").value="인벤토리"}if(b==="set"){a=1;right_display="set";$("#popup_title").className="title_set";$("#popup_title").innerHTML="세트 현황";$("#set_filter").style.display="block";$("#set").style.display="block";$("#set_check").style.display="block";$("#shift3").classList.add("selected");$("#shift3").value="창 닫기"}else{$("#set_filter").style.display="none";$("#set").style.display="none";$("#set_check").style.display="none";$("#shift3").classList.remove("selected");$("#shift3").value="세트 현황"}if(b==="craft"){a=1;right_display="craft";$("#popup_title").className="title_craft";$("#popup_title").innerHTML="에픽 도감";$("#craft_filter").style.display="block";$("#craft").style.display="block";$("#craft_check").style.display="block";$("#shift4").classList.add("selected");$("#shift4").classList.remove("ready");$("#shift4").value="창 닫기"}else{$("#craft_filter").style.display="none";$("#craft").style.display="none";$("#craft_check").style.display="none";$("#shift4").classList.remove("selected");$("#shift4").value="에픽 도감"}if(b==="equip"){a=1;right_display="equip";$("#popup_title").className="title_equip";$("#popup_title").innerHTML="장비 장착";$("#equip_state").style.display="block";if(myCharacter===""){$("#equip_notice").style.display="table";$("#equip_list").style.display="none"}else{$("#equip_notice").style.display="none";$("#equip_list").style.display="block"}$("#equip_enchant").style.display="block";$("#equip_character").style.display="block";$("#shift5").classList.add("selected");$("#shift5").classList.remove("ready");$("#shift5").value="닫기"}else{$("#equip_state").style.display="none";$("#equip_notice").style.display="none";$("#equip_list").style.display="none";$("#equip_enchant").style.display="none";$("#equip_character").style.display="none";$("#shift5").classList.remove("selected");$("#shift5").value="장착"}if(b==="chance"){a=2;right_display="chance";$("#popup_chance").style.display="block";$("#popup_chance_main").scrollTop=0}else{$("#popup_chance").style.display="none"}if(a===1){$("#popup").style.display="block";$("#checkbox").style.display="block";if(b==="record"){$("#record").scrollTop=$("#record").scrollHeight}}else{$("#popup").style.display="none";$("#checkbox").style.display="none";right_display="none"}if($("#option_sound").checked===true){if(a>0){sfxList.open.play()}else{sfxList.close.play()}}}function setChance(g){var e=[["어려움","매우어려움"],["노멀","익스퍼트","마스터","킹","슬레이어"],["에픽 아이템","코스모 소울","지옥 구슬"]];var c=0;function f(k,l){var h;var i=(""+k).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!i){h=0}else{h=Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0))}if(!l){k=k.toFixed(h)+3}else{k=(k*l).toFixed(Math.max(0,h-Math.log(l)+3))}return parseFloat(k)}for(var d=1;d<=e[0].length;d++){for(var b=1;b<=e[1].length;b++){c=0;for(var a=1;a<=e[2].length;a++){switch(g){case"show":$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=f(chanceList_num[1][d-1][b-1][a],100).toString();break;case"reset":$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=f(chanceList_num_default[1][d-1][b-1][a],100).toString();chanceList_num[1][d-1][b-1][a]=chanceList_num_default[1][d-1][b-1][a];break;case"perfect":if(a===1){$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=100;chanceList_num[1][d-1][b-1][a]=1}else{$("#chance_text_"+d.toString()+b.toString()+a.toString()).value=0;chanceList_num[1][d-1][b-1][a]=0}case"apply":if(!isNumber($("#chance_text_"+d.toString()+b.toString()+a.toString()).value)){alert('※ 경고 : "'+e[0][d-1]+'" & "'+e[1][b-1]+'" 난이도의 "'+e[2][a-1]+'" 드랍률이 숫자가 아닙니다.');return}else{if($("#chance_text_"+d.toString()+b.toString()+a.toString()).value===""){$("#chance_text_"+d.toString()+b.toString()+a.toString()).value="0"}}c+=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+a.toString()).value),0.01);break}}switch(g){case"reset":chanceList_num[1][d-1][b-1][0]=chanceList_num_default[1][d-1][b-1][0];break;case"perfect":chanceList_num[1][d-1][b-1][0]=0;break;case"apply":if(c>1){alert('※ 경고 : "'+e[0][d-1]+'" & "'+e[1][b-1]+'" 난이도의 드랍률의 합계가 100%를 넘습니다.');return}chanceList_num[1][d-1][b-1][0]=1-c;chanceList_num[1][d-1][b-1][1]=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+"1").value),0.01);chanceList_num[1][d-1][b-1][2]=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+"2").value),0.01);chanceList_num[1][d-1][b-1][3]=f(parseFloat($("#chance_text_"+d.toString()+b.toString()+"3").value),0.01);break}}}switch(g){case"reset":alert("드랍 확률이 초기화되었습니다.");break;case"perfect":alert("에픽 드랍률이 100%가 되었습니다.");break;case"apply":alert("드랍 확률이 정상적으로 적용되었습니다.");break}};